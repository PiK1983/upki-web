(function(t){function e(e){for(var a,i,n=e[0],l=e[1],c=e[2],m=0,u=[];m<n.length;m++)i=n[m],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&u.push(s[i][0]),s[i]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);d&&d(e);while(u.length)u.shift()();return r.push.apply(r,c||[]),o()}function o(){for(var t,e=0;e<r.length;e++){for(var o=r[e],a=!0,n=1;n<o.length;n++){var l=o[n];0!==s[l]&&(a=!1)}a&&(r.splice(e--,1),t=i(i.s=o[0]))}return t}var a={},s={app:0},r=[];function i(e){if(a[e])return a[e].exports;var o=a[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=a,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(o,a,function(e){return t[e]}.bind(null,a));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=e,n=n.slice();for(var c=0;c<n.length;c++)e(n[c]);var d=l;r.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},"07b2":function(t,e,o){},"07bb":function(t,e,o){},"233d":function(t,e,o){},"2a84":function(t,e,o){},3562:function(t,e,o){"use strict";var a=o("a9d7"),s=o.n(a);s.a},"42a3":function(t,e,o){"use strict";var a=o("6015"),s=o.n(a);s.a},"56d7":function(t,e,o){"use strict";o.r(e);o("28a5"),o("f559"),o("8615"),o("456d"),o("6762"),o("2fdb"),o("ac6a"),o("7f7f"),o("cadf"),o("551c"),o("f751"),o("097d"),o("f9e3"),o("b15b");var a=o("5f5b"),s=o("4776"),r=o.n(s),i=o("8e5f"),n=o.n(i),l=o("bc3a"),c=o.n(l),d=o("2b0e"),m=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"app"}},[o("link",{attrs:{rel:"stylesheet",href:"https://use.fontawesome.com/releases/v5.2.0/css/all.css",integrity:"sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ",crossorigin:"anonymous"}}),o("sidebar-menu",{attrs:{menu:t.menu,width:t.width,collapsed:t.collapsed}}),o("router-view"),this.$root.showMessage?o("alert",{attrs:{message:this.$root.message,variant:this.$root.message_class,countDown:this.$root.message_dismiss}}):t._e()],1)},u=[],f=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("b-container",[o("b-row",[o("b-col",{attrs:{"align-self":"center"}},[o("b-alert",{attrs:{variant:t.variant,show:t.countDown,dismissible:""},on:{dismissed:t.showAlert,"dismiss-count-down":t.countDownChanged}},[t._v(t._s(t.message))])],1)],1)],1)},h=[],p={data:function(){return{dismissCountDown:10,showAlert:!1}},props:["message","variant","countDown"],methods:{countDownChanged:function(t){this.showAlert=t}}},b=p,g=o("2877"),v=Object(g["a"])(b,f,h,!1,null,null,null),y=v.exports,F={name:"App",components:{alert:y},data:function(){return{width:"200px",collapsed:!0,rtl:!0,menu:[{header:!0,title:"uPKI menu"},{href:"/",title:"Home",icon:"fa fa-home"},{href:"/nodes",title:"Certificates",icon:"fa fa-medal"},{href:"/profiles",title:"Profiles",icon:"fa fa-layer-group"},{href:"/admins",title:"Admins",icon:"fa fa-user-shield"}]}}},C=F,N=(o("60bc"),o("b0a0"),Object(g["a"])(C,m,u,!1,null,null,null)),_=N.exports,w=o("8c4f"),$=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container"},[o("h1",{staticClass:"title text-center"},[t._v("Welcome on Î¼PKI administration!")]),o("div",{staticClass:"logo"}),o("div",{staticClass:"row"},[o("div",{staticClass:"col-sm-4 offset-sm-2 text-center"},[o("b-button",{attrs:{type:"button",block:"",variant:"success",size:"lg"},on:{click:function(e){return t.downloadCA()}}},[o("i",{staticClass:"fa fa-download"}),t._v("\n        Download CA certificate\n      ")])],1),o("div",{staticClass:"col-sm-4 text-center"},[o("b-button",{attrs:{type:"button",block:"",variant:"primary",size:"lg"},on:{click:function(e){return t.downloadCRL()}}},[o("i",{staticClass:"fa fa-download"}),t._v("\n        Download CRL\n      ")])],1)])])},S=[],k={name:"Home",data:function(){return{api_host:this.$root.publicAPI}},methods:{downloadCA:function(){var t=this;c.a.get("".concat(this.api_host,"/certs/ca.crt")).then((function(e){var o="success"===e.data.status?"success":"danger";"success"===o?t.$root.forceFileDownload({name:"ca.crt",data:e.data.certificate}):t.$root.show(e.data.message,"danger")})).catch((function(e){console.error(e),t.$root.show(e,"danger",60)}))},downloadCRL:function(){var t=this;c.a.get("".concat(this.api_host,"/certs/crl.pem")).then((function(e){var o="success"===e.data.status?"success":"danger";"success"===o?t.$root.forceFileDownload({name:"crl.pem",data:e.data.certificate}):t.$root.show(e.data.message,"danger")})).catch((function(e){console.error(e),t.$root.show(e,"danger",60)}))}}},x=k,D=(o("3562"),Object(g["a"])(x,$,S,!1,null,null,null)),P=D.exports,A=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container"},[o("div",{staticClass:"row"},[t._m(0),o("div",{staticClass:"col-sm-2"},[o("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"button"},on:{click:function(e){return t.showNodeModal(null,"Create")}}},[o("i",{staticClass:"fa fa-plus-circle"}),t._v("\n            Add Certificate\n      ")])])]),o("div",{staticClass:"row"},[o("div",{staticClass:"col-sm-12"},[o("table",{staticClass:"table table-hover"},[t._m(1),o("tbody",t._l(this.$root.nodes,(function(e,a){return o("tr",{key:a,class:e.State.toLowerCase(),on:{click:function(o){return t.displayNode(e.DN)}}},[o("td",[t.hasFeature(e.Profile,"sslCA")?o("i",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-star",attrs:{title:"CA"}}):t._e(),t.hasFeature(e.Profile,"clientAuth")?o("i",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-user",attrs:{title:"User"}}):t._e(),t.hasFeature(e.Profile,"serverAuth")?o("i",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-server",attrs:{title:"Server"}}):t._e(),t.hasFeature(e.Profile,"emailProtection")?o("i",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-envelope",attrs:{title:"Email"}}):t._e()]),o("td",[t._v(t._s(t._f("capitalize")(e.Profile)))]),o("td",[t._v(t._s(e.CN))]),o("td",[t._v(t._s(e.Created_human))]),o("td",[t._v(t._s(e.Duration)+" days")]),o("td",{staticClass:"text-right"},["Init"===e.State?o("i",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-edit text-primary pointer",attrs:{title:"Edit node"},on:{click:function(o){return o.stopPropagation(),t.editNode(e.DN)}}}):t._e(),"Init"===e.State?o("i",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-file-signature pointer",attrs:{title:"Sign node"},on:{click:function(o){return o.stopPropagation(),t.showNodeSign(e)}}}):t._e(),"Init"===e.State?o("i",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-magic text-warning pointer",attrs:{title:"Get generation command"},on:{click:function(o){return o.stopPropagation(),t.getCommand(e)}}}):t._e(),"Valid"===e.State?o("i",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-download pointer",attrs:{title:"Download certificate"},on:{click:function(o){return o.stopPropagation(),t.downloadCert(e.DN,e.CN,e.Profile)}}}):t._e(),"Valid"===e.State?o("i",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-ban text-danger pointer",attrs:{title:"Revoke node"},on:{click:function(o){return o.stopPropagation(),t.revokeNode(e.DN)}}}):t._e(),"Revoked"===e.State?o("i",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-check text-success pointer",attrs:{title:"Restore node"},on:{click:function(o){return o.stopPropagation(),t.restoreNode(e.DN)}}}):t._e(),["Revoked","Expired","Init"].includes(e.State)?o("i",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-trash text-danger pointer",attrs:{title:"Delete node"},on:{click:function(o){return o.stopPropagation(),t.deleteNode(e.DN)}}}):t._e()])])})),0)])])]),o("modal-node",{ref:"modalNode"}),o("modal-sign",{ref:"modalSign"})],1)},U=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"col-sm-10"},[o("h1",[o("i",{staticClass:"fa fa-medal"}),t._v(" Certificates")])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("thead",[o("tr",[o("th",{attrs:{scope:"col"}},[t._v("Type")]),o("th",{attrs:{scope:"col"}},[t._v("Profile")]),o("th",{attrs:{scope:"col"}},[t._v("Name (CN)")]),o("th",{attrs:{scope:"col"}},[t._v("Creation")]),o("th",{attrs:{scope:"col"}},[t._v("Duration")]),o("th",{staticClass:"text-right",attrs:{scope:"col"}},[t._v("Actions")])])])}],T=(o("6b54"),function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("b-modal",{ref:"modalNode",attrs:{title:t.title,size:"lg","hide-footer":""}},[o("b-form",{staticClass:"w-100",on:{submit:t.onSubmit,reset:t.onReset}},[o("b-card",{attrs:{"bg-variant":"light"}},["Show"===t.actionName?o("b-form-group",{staticClass:"mb-0",attrs:{id:"form-cn-group",label:"Name (CN)","label-cols-sm":"3","label-align-sm":"right","label-for":"form-cn-text"}},[o("b-alert",{staticClass:"pt-1",attrs:{id:"form-cn-text",show:"",variant:"light"}},[t._v(t._s(t.nodeForm.CN)+"\n        ")])],1):t._e(),o("b-form-group",{staticClass:"mb-0",attrs:{id:"form-profile-group",label:"Profile","label-for":"form-profile-input","label-cols-sm":"3","label-align-sm":"right"}},["Show"!==t.actionName?o("b-form-select",{attrs:{id:"form-profile-input",options:this.$root.nodeForm.options,placeholder:"Select profile",required:""},on:{change:t.onProfileSelect},model:{value:t.nodeForm.Profile,callback:function(e){t.$set(t.nodeForm,"Profile",e)},expression:"nodeForm.Profile"}}):o("b-alert",{staticClass:"pt-1",attrs:{id:"form-profile-input",show:"",variant:"light"}},[t._v(t._s(t.nodeForm.Profile)+"\n        ")])],1),"Show"!==t.actionName?o("b-form-group",{attrs:{id:"form-cn-group",label:"Name (CN)","label-cols-sm":"3","label-align-sm":"right","label-for":"form-cn-input"}},[o("b-form-input",{attrs:{id:"form-cn-input",required:"",placeholder:"Set Common Name (CN)"},on:{change:function(e){return t.onCnSet(t.nodeForm.CN)}},model:{value:t.nodeForm.CN,callback:function(e){t.$set(t.nodeForm,"CN",e)},expression:"nodeForm.CN"}})],1):t._e(),o("b-form-group",{staticClass:"mb-0",attrs:{id:"form-dn-group",label:"Qualified Name (DN)","label-for":"form-dn-input","label-cols-sm":"3","label-align-sm":"right"}},[o("b-alert",{staticClass:"pt-1 dn",attrs:{id:"form-dn-input",show:"",variant:"light"}},[t._v(t._s(t.calculatedDN)+"\n        ")])],1),o("b-form-group",{staticClass:"mb-0",attrs:{id:"form-domain-group",label:"Domain","label-for":"form-domain-text","label-cols-sm":"3","label-align-sm":"right"}},[o("b-alert",{staticClass:"pt-1",attrs:{id:"form-domain-text",show:"",variant:"light"}},[t._v(t._s(t.nodeForm.Domain)+"\n        ")])],1),["Valid","Revoked"].includes(t.nodeForm.State)?o("b-form-group",{attrs:{id:"form-sn-group",label:"Serial number","label-cols-sm":"3","label-align-sm":"right","label-for":"form-sn-text"}},[o("b-alert",{staticClass:"pt-1",attrs:{id:"form-sn-text",show:"",variant:"light"}},[t._v(t._s(t.nodeForm.Serial)+"\n        ")])],1):t._e(),o("b-form-group",{staticClass:"mb-0",attrs:{id:"form-duration-group",label:"Duration","label-for":"form-duration-input","label-cols-sm":"3","label-align-sm":"right"}},["Show"!==t.actionName?o("b-form-input",{attrs:{id:"form-duration-input",type:"text",required:"",placeholder:"Choose duration"},model:{value:t.nodeForm.Duration,callback:function(e){t.$set(t.nodeForm,"Duration",e)},expression:"nodeForm.Duration"}}):o("b-alert",{staticClass:"pt-1",attrs:{id:"form-duration-input",show:"",variant:"light"}},[t._v(t._s(t.nodeForm.Duration)+"\n        ")])],1),"Valid"===t.nodeForm.State?o("b-form-group",{attrs:{id:"form-start-group",label:"Validity Start","label-cols-sm":"3","label-align-sm":"right","label-for":"form-start-text"}},[o("b-alert",{staticClass:"pt-1",attrs:{id:"form-start-text",show:"",variant:"light"}},[t._v(t._s(t.nodeForm.Start)+"\n        ")])],1):t._e(),"Valid"===t.nodeForm.State?o("b-form-group",{attrs:{id:"form-end-group",label:"Validity End","label-cols-sm":"3","label-align-sm":"right","label-for":"form-end-text"}},[o("b-alert",{staticClass:"pt-1",attrs:{id:"form-end-text",show:"",variant:"light"}},[t._v(t._s(t.nodeForm.Expire)+"\n        ")])],1):t._e(),"Show"===t.actionName||t.nodeForm.Altnames?t._e():o("b-form-group",{staticClass:"mb-0",attrs:{id:"form-adv-group","label-cols-sm":"3","label-align-sm":"right"}},[o("b-form-checkbox",{attrs:{id:"form-adv","unchecked-value":!1},model:{value:t.altnames,callback:function(e){t.altnames=e},expression:"altnames"}},[t._v("Add alternate names ?\n          ")])],1),o("b-form-group",{directives:[{name:"show",rawName:"v-show",value:t.nodeForm.Altnames||t.altnames,expression:"nodeForm.Altnames || altnames"}],staticClass:"mb-0",attrs:{id:"form-sans-group",label:"Alternate Names","label-for":"form-alt-input","label-cols-sm":"3","label-align-sm":"right"},model:{value:t.nodeForm.Sans,callback:function(e){t.$set(t.nodeForm,"Sans",e)},expression:"nodeForm.Sans"}},["Show"!==t.actionName?o("i",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-plus-circle text-success",attrs:{id:"form-alt-input",title:"Add name"},on:{click:function(e){return t.addAltName(!0)}}}):t._e()]),o("b-form-group",{directives:[{name:"show",rawName:"v-show",value:t.nodeForm.Altnames||t.altnames,expression:"nodeForm.Altnames || altnames"}],staticClass:"mb-0",attrs:{"label-cols-sm":"3","label-align-sm":"right"}},[o("table",{staticClass:"altnames-list"},t._l(t.nodeForm.Sans,(function(e,a){return o("tr",{key:a,staticClass:"altname-entry"},[o("td",["Show"!==t.actionName?o("b-form-input",{attrs:{placeholder:"Set Alternate Name"},model:{value:t.nodeForm.Sans[a],callback:function(e){t.$set(t.nodeForm.Sans,a,e)},expression:"nodeForm.Sans[index]"}}):o("b-alert",{staticClass:"pt-1",attrs:{show:"",variant:"light"}},[t._v(t._s(e)+"\n              ")])],1),o("td",["Show"!==t.actionName?o("i",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-times-circle text-danger",attrs:{title:"Remove"},on:{click:function(e){return t.removeAltName(a)}}}):t._e()])])})),0)])],1),o("b-form-group",{staticClass:"controls"},["Show"!==t.actionName?o("b-button",{attrs:{type:"submit",variant:"primary"}},[o("i",{staticClass:"fa fa-plus-circle"}),o("span",[t._v(t._s(t.actionName)+" node")])]):o("b-button",{attrs:{type:"reset",variant:"danger"}},[o("i",{staticClass:"fa fa-times"}),t._v("\n        Close\n      ")]),"Show"!==t.actionName?o("b-button",{attrs:{type:"reset",variant:"danger"}},[o("i",{staticClass:"fa fa-ban"}),t._v("\n        Cancel\n      ")]):t._e()],1)],1)],1)}),E=[],K={data:function(){return{profiles:this.$root.profiles,api_host:this.$root.privateAPI,nodeForm:this.$root.nodeForm,actionName:null,altnames:!1,editForm:!1,title:null,calculatedDN:null}},name:"ModalNode",methods:{showModal:function(t,e){this.editForm=Boolean(t),this.title="".concat(e," Certificate"),this.nodeForm=this.$root.initNode(t),this.nodeForm.DN.includes("/CN=")?this.calculatedDN=this.nodeForm.DN:this.calculatedDN="".concat(this.nodeForm.DN,"/CN=").concat(this.nodeForm.CN),this.actionName="Duplicate"===e?"Create":e,"Create"===e&&this.addAltName(),this.$refs.modalNode.show()},onProfileSelect:function(t){var e=this.$root.getProfile(t);this.nodeForm.DN=this.$root.buildDn(e.subject),this.nodeForm.Duration=e.duration,this.nodeForm.CertType=e.certType,this.nodeForm.Digest=e.digest,this.nodeForm.KeyType=e.keyType,this.nodeForm.KeyLen=e.keyLen,this.nodeForm.Altnames=e.altnames,this.nodeForm.Domain=e.domain,this.nodeForm.Sans=[],this.nodeForm.CN?this.calculatedDN="".concat(this.nodeForm.DN,"/CN=").concat(this.nodeForm.CN):this.calculatedDN=this.nodeForm.DN,this.addAltName()},onCnSet:function(t){this.calculatedDN="".concat(this.nodeForm.DN,"/CN=").concat(t),this.nodeForm.Sans=[],this.addAltName()},addAltName:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if("Init"!==this.nodeForm.State||!this.nodeForm.CN)return!1;var e=null;return(this.nodeForm.Altnames||this.altnames||t)&&(this.nodeForm.CN.includes(".")||this.nodeForm.CN.includes("@")?e=this.nodeForm.CN:this.$root.profileSupport(this.nodeForm.Profile,"email")?e="".concat(this.nodeForm.CN,"@").concat(this.nodeForm.Domain):this.$root.profileSupport(this.nodeForm.Profile,"server")&&(e="".concat(this.nodeForm.CN,".").concat(this.nodeForm.Domain))),e&&!this.nodeForm.Sans.includes(e)&&this.nodeForm.Sans.push(e),!0},removeAltName:function(t){this.nodeForm.Sans.splice(t,1)},addNode:function(t){var e=this,o="".concat(this.api_host,"/nodes");c.a.post(o,t).then((function(t){var o="success"===t.data.status?"success":"danger";"success"===o&&e.$root.getNodes(),e.$root.show(t.data.message,o)})).catch((function(t){console.error(t),e.$root.show(t,"danger",60)}))},updateNode:function(t){var e=this,o=btoa(t.DN),a="".concat(this.api_host,"/nodes/").concat(o);c.a.put(a,t).then((function(t){var o="success"===t.data.status?"success":"danger";e.$root.getNodes(),e.$root.show(t.data.message,o)})).catch((function(t){console.error(t),e.$root.show(t,"danger",60)}))},onSubmit:function(t){t.preventDefault(),this.$refs.modalNode.hide();var e={Profile:this.nodeForm.Profile,CN:this.nodeForm.CN,DN:this.calculatedDN,Digest:this.nodeForm.Digest,Duration:this.nodeForm.Duration,KeyType:this.nodeForm.KeyType,KeyLen:this.nodeForm.KeyLen,Domain:this.nodeForm.Domain,SANS:this.nodeForm.Sans};this.editForm?this.updateNode(e):this.addNode(e),this.$refs.modalNode.hide(),this.nodeForm=this.$root.nodeForm,this.editForm=!1},onReset:function(t){t.preventDefault(),this.$refs.modalNode.hide(),this.nodeForm=this.$root.nodeForm,this.editForm=!1}}},j=K,O=(o("8b28"),Object(g["a"])(j,T,E,!1,null,null,null)),R=O.exports,M=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("b-modal",{ref:"modalSign",attrs:{title:"Sign "+t.nodeForm.CN+" ("+t.nodeForm.Profile+")",size:"lg","hide-footer":""}},[o("b-form",{on:{submit:t.onSubmit,reset:t.onReset}},[o("b-card",{attrs:{"bg-variant":"light"}},[o("b-form-group",{staticClass:"mb-0",attrs:{id:"form-csr-group",label:"Select Certificate Signing Request (CSR)","label-for":"form-csr-input","label-cols-sm":"5","label-align-sm":"right"}},[o("b-form-file",{attrs:{accept:".csr, application/csrattrs",placeholder:"Drop CSR file here...","drop-placeholder":"Drop CSR file here..."},on:{change:t.selectCSR},model:{value:t.csr_file,callback:function(e){t.csr_file=e},expression:"csr_file"}})],1),o("b-form-group",[o("b-form-textarea",{staticClass:"raw_data",attrs:{id:"form-csr-input",placeholder:"or copy CSR content here...",rows:"10","max-rows":"15",required:""},model:{value:t.csr_data,callback:function(e){t.csr_data=e},expression:"csr_data"}})],1)],1),o("b-form-group",{staticClass:"controls"},[o("b-button",{attrs:{type:"submit",variant:"success"}},[o("i",{staticClass:"fa fa-plus-circle"}),o("span",[t._v("Sign node")])]),o("b-button",{attrs:{type:"reset",variant:"danger"}},[o("i",{staticClass:"fa fa-ban"}),t._v("\n        Cancel\n      ")])],1)],1)],1)},L=[],I={data:function(){return{api_host:this.$root.privateAPI,node_host:this.$root.publicAPI,nodeForm:this.$root.nodeForm,csr_data:null,csr_file:null}},name:"ModalSign",methods:{showModal:function(t){this.nodeForm=this.$root.initNode(t),this.$refs.modalSign.show()},selectCSR:function(t){var e=this,o=new FileReader;o.readAsText(t.target.files[0],"UTF-8"),o.onload=function(t){e.csr_data=t.target.result},o.onerror=function(){e.$root.show("Unable to read File","danger")},this.csr_data.includes("-----BEGIN CERTIFICATE REQUEST-----")||this.$root.show("This does not seems to be a valid CSR file","danger")},onSubmit:function(t){var e=this;t.preventDefault();var o="".concat(this.api_host,"/sign"),a={Profile:this.nodeForm.Profile,CN:this.nodeForm.CN,DN:"".concat(this.nodeForm.DN),CSR:this.csr_data};c.a.post(o,a).then((function(t){var o="success"===t.data.status?"success":"danger";"success"===o?e.$root.getNodes():(console.error(t.data.message),e.$root.show(t.data.message,"danger"))})).catch((function(t){console.error(t),e.$root.show(t,"danger",60)})),this.$refs.modalSign.hide(),this.nodeForm=this.$root.nodeForm},onReset:function(t){t.preventDefault(),this.$refs.modalSign.hide(),this.nodeForm=this.$root.nodeForm}}},z=I,q=(o("832f"),Object(g["a"])(z,M,L,!1,null,null,null)),V=q.exports,X={filters:{capitalize:function(t){if(!t)return"";var e=t.toString();return e.charAt(0).toUpperCase()+e.slice(1)}},data:function(){return{api_host:this.$root.privateAPI,node_host:this.$root.publicAPI}},components:{modalNode:R,modalSign:V},methods:{showNodeModal:function(t,e){this.$refs.modalNode.showModal(t,e)},showNodeSign:function(t){this.$refs.modalSign.showModal(t)},editNode:function(t){var e=this.$root.getNode(t);this.showNodeModal(e,"Update")},displayNode:function(t){var e=this.$root.getNode(t);this.showNodeModal(e,"Show")},hasFeature:function(t,e){return this.$root.profileSupport(t,e)},downloadCert:function(t,e,o){this.$root.downloadNode(t,e,o)},getCommand:function(t){var e=this;c.a.post("".concat(this.node_host,"/magic/").concat(t.Profile),{cn:t.CN}).then((function(t){var o="success"===t.data.status?"success":"danger";"success"===o?e.$root.show(t.data.command,"success",60):e.$root.show(t.data.message,o)})).catch((function(t){console.error(t),e.$root.show(t,"danger",60)}))},revokeNode:function(t){var e=this,o="".concat(this.api_host,"/revoke");c.a.post(o,{DN:t,Reason:"admin revokation"}).then((function(t){var o="success"===t.data.status?"success":"danger";"success"===o?e.$root.getNodes():(console.log(t.data.message),e.$root.show(t.data.message,"danger"))})).catch((function(t){console.error(t),e.$root.show(t,"danger",60)}))},restoreNode:function(t){var e=this,o="".concat(this.api_host,"/unrevoke");c.a.post(o,{DN:t}).then((function(t){var o="success"===t.data.status?"success":"danger";"success"===o?e.$root.getNodes():e.$root.show(t.data.message,"danger")})).catch((function(t){console.error(t),e.$root.show(t,"danger",60)}))},deleteNode:function(t){var e=this,o=btoa(t),a="".concat(this.api_host,"/nodes/").concat(o);c.a.delete(a).then((function(t){var o="success"===t.data.status?"success":"danger";"success"===o?e.$root.getNodes():(console.error(t.data.message),e.$root.show(t.data.message,"danger"))})).catch((function(t){console.error(t),e.$root.show(t,"danger",60)}))}},created:function(){this.$root.getNodes()}},B=X,J=(o("66e8"),Object(g["a"])(B,A,U,!1,null,null,null)),W=J.exports,G=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container"},[o("div",{staticClass:"row"},[t._m(0),o("div",{staticClass:"col-sm-2"},[o("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"button"},on:{click:function(e){return t.showProfileModal(null)}}},[o("i",{staticClass:"fa fa-plus-circle"}),t._v("\n            Add Profile\n      ")])])]),o("div",{staticClass:"row"},[o("div",{staticClass:"col-sm-12"},[o("table",{staticClass:"table table-hover"},[t._m(1),o("tbody",t._l(this.$root.profiles,(function(e,a){return o("tr",{key:a},[o("td",[e.certType.includes("sslCA")?o("i",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-star",attrs:{title:"CA"}}):t._e(),e.extendedKeyUsage.includes("clientAuth")?o("i",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-user",attrs:{title:"User"}}):t._e(),e.extendedKeyUsage.includes("serverAuth")?o("i",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-server",attrs:{title:"Server"}}):t._e(),e.extendedKeyUsage.includes("emailProtection")?o("i",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-envelope",attrs:{title:"Email"}}):t._e()]),o("td",[t._v(t._s(e.name))]),o("td",[t._v(t._s(e.domain))]),o("td",[t._v(t._s(e.duration)+" days")]),o("td",{staticClass:"text-right"},[o("i",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-edit text-primary pointer",attrs:{title:"Edit profile"},on:{click:function(o){return t.editProfile(e)}}}),o("i",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-clone text-secondary pointer",attrs:{title:"Duplicate profile"},on:{click:function(o){return t.duplicateProfile(e)}}}),o("i",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-times text-danger pointer",attrs:{title:"Delete profile"},on:{click:function(o){return t.deleteProfile(e)}}})])])})),0)])])]),o("modal-profile",{ref:"modalProfile"})],1)},H=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"col-sm-10"},[o("h1",[o("i",{staticClass:"fa fa-layer-group"}),t._v(" Profiles")])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("thead",[o("tr",[o("th",{attrs:{scope:"col"}},[t._v("Type")]),o("th",{attrs:{scope:"col"}},[t._v("Name")]),o("th",{attrs:{scope:"col"}},[t._v("Domain")]),o("th",{attrs:{scope:"col"}},[t._v("Duration")]),o("th",{staticClass:"text-right",attrs:{scope:"col"}},[t._v("Actions")])])])}],Q=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("b-modal",{ref:"modalProfile",attrs:{title:t.title,size:"lg","hide-footer":""}},[o("b-form",{staticClass:"form-horizontal",on:{submit:t.onSubmit,reset:t.onReset}},[o("b-card",{attrs:{"bg-variant":"light"}},[o("b-form-group",{staticClass:"mb-0",attrs:{id:"form-name-group",label:"Name","label-for":"form-name-input","label-cols-sm":"3","label-align-sm":"right","label-class":"pt-0"}},[o("b-form-input",{attrs:{id:"form-name-input",required:"",placeholder:"Set name"},model:{value:t.profileForm.name,callback:function(e){t.$set(t.profileForm,"name",e)},expression:"profileForm.name"}})],1),o("b-form-group",{staticClass:"mb-0",attrs:{id:"form-type-group",label:"Type","label-for":"form-type-select","label-cols-sm":"3","label-align-sm":"right","label-class":"pt-0"}},[o("multiselect",{attrs:{id:"form-type-select","close-on-select":!0,multiple:!0,"clear-on-select":!1,placeholder:"Certificate Type",options:this.$root.profileOptions.CertTypes},on:{select:t.onCertTypeSelect,remove:t.onCertTypeRemove},model:{value:t.profileForm.certType,callback:function(e){t.$set(t.profileForm,"certType",e)},expression:"profileForm.certType"}})],1),o("b-form-group",{staticClass:"mb-0",attrs:{id:"form-domain-group",label:"Domain","label-for":"form-domain-input","label-cols-sm":"3","label-align-sm":"right","label-class":"pt-0"}},[o("b-form-input",{attrs:{id:"form-domain-input",required:"",placeholder:"Set domain"},model:{value:t.profileForm.domain,callback:function(e){t.$set(t.profileForm,"domain",e)},expression:"profileForm.domain"}})],1),o("b-form-group",{staticClass:"mb-0",attrs:{id:"form-duration-group",label:"Duration (days)","label-for":"form-duration-input","label-cols-sm":"3","label-align-sm":"right","label-class":"pt-0"}},[o("b-form-input",{attrs:{id:"form-duration-input",required:"",placeholder:"0"},model:{value:t.profileForm.duration,callback:function(e){t.$set(t.profileForm,"duration",e)},expression:"profileForm.duration"}})],1),o("b-form-group",{staticClass:"mb-0",attrs:{id:"form-subject-group",label:"Subject","label-for":"form-subject-input","label-cols-sm":"3","label-align-sm":"right","label-class":"pt-0"}},[o("b-form-input",{attrs:{id:"form-subject-input",required:"",placeholder:"Set subject"},model:{value:t.profileForm.DN,callback:function(e){t.$set(t.profileForm,"DN",e)},expression:"profileForm.DN"}})],1),o("b-form-group",{attrs:{id:"form-alt-group"}},[o("b-form-checkbox",{attrs:{id:"form-alt"},model:{value:t.profileForm.altnames,callback:function(e){t.$set(t.profileForm,"altnames",e)},expression:"profileForm.altnames"}},[t._v("Alternate Names ?\n        ")])],1),o("b-form-group",{attrs:{id:"form-adv-group"}},[o("b-form-checkbox",{attrs:{id:"form-adv","unchecked-value":!1},model:{value:t.advanced,callback:function(e){t.advanced=e},expression:"advanced"}},[t._v("Advanced usage ?\n        ")])],1),t.advanced?o("b-form-group",[o("b-form-group",{staticClass:"mb-0",attrs:{id:"form-keytype-group",label:"Key type","label-for":"form-keytype-select","label-cols-sm":"3","label-align-sm":"right","label-class":"pt-0"}},[o("multiselect",{attrs:{id:"form-keytype-select","close-on-select":!0,placeholder:"Key Type",options:this.$root.profileOptions.KeyTypes},model:{value:t.profileForm.keyType,callback:function(e){t.$set(t.profileForm,"keyType",e)},expression:"profileForm.keyType"}})],1),o("b-form-group",{staticClass:"mb-0",attrs:{id:"form-keylen-group",label:"Key length","label-for":"form-keylen-select","label-cols-sm":"3","label-align-sm":"right","label-class":"pt-0"}},[o("multiselect",{attrs:{id:"form-keylen-select","close-on-select":!0,placeholder:"Key length",options:this.$root.profileOptions.KeyLen},model:{value:t.profileForm.keyLen,callback:function(e){t.$set(t.profileForm,"keyLen",e)},expression:"profileForm.keyLen"}})],1),o("b-form-group",{staticClass:"mb-0",attrs:{id:"form-digest-group",label:"Algorithm","label-for":"form-digest-select","label-cols-sm":"3","label-align-sm":"right","label-class":"pt-0"}},[o("multiselect",{attrs:{id:"form-digest-select","close-on-select":!0,placeholder:"Algorithm",options:this.$root.profileOptions.Digest},model:{value:t.profileForm.digest,callback:function(e){t.$set(t.profileForm,"digest",e)},expression:"profileForm.digest"}})],1),o("b-form-group",{staticClass:"mb-0",attrs:{id:"form-usage-group",label:"Certificate usage","label-for":"form-usage-select","label-cols-sm":"3","label-align-sm":"right","label-class":"pt-0"}},[o("multiselect",{attrs:{id:"form-usage-select","close-on-select":!1,multiple:!0,"clear-on-select":!1,placeholder:"Select usages",options:this.$root.profileOptions.Usages},model:{value:t.profileForm.keyUsage,callback:function(e){t.$set(t.profileForm,"keyUsage",e)},expression:"profileForm.keyUsage"}})],1),o("b-form-group",{staticClass:"mb-0",attrs:{id:"form-ext-usage-group",label:"Certificate extended Usage","label-for":"form-ext-usage-select","label-cols-sm":"3","label-align-sm":"right","label-class":"pt-0"}},[o("multiselect",{attrs:{id:"form-ext-usage-select","close-on-select":!1,multiple:!0,"clear-on-select":!1,placeholder:"Select extended usages",options:this.$root.profileOptions.ExtendedUsages},model:{value:t.profileForm.extendedKeyUsage,callback:function(e){t.$set(t.profileForm,"extendedKeyUsage",e)},expression:"profileForm.extendedKeyUsage"}})],1)],1):t._e()],1),o("b-form-group",{staticClass:"controls"},["hide"!==t.actionName?o("b-button",{attrs:{type:"submit",variant:"primary"}},[o("i",{staticClass:"fa fa-plus-circle"}),o("span",[t._v(t._s(t.actionName)+" profile")])]):o("b-button",{attrs:{type:"reset",variant:"danger"}},[o("i",{staticClass:"fa fa-times"}),t._v("\n          Close\n        ")]),"hide"!==t.actionName?o("b-button",{attrs:{type:"reset",variant:"danger"}},[o("i",{staticClass:"fa fa-ban"}),t._v("\n          Cancel\n        ")]):t._e()],1)],1)],1)},Y=[],Z={data:function(){return{api_host:this.$root.privateAPI,profileForm:this.$root.profileForm,origName:null,actionName:null,editForm:!1,advanced:!1,title:null}},components:{Multiselect:n.a},name:"ModalProfile",methods:{showModal:function(t,e){this.editForm=Boolean(t),this.profileForm=this.$root.initProfile(t),this.profileForm.DN=this.$root.buildDn(this.profileForm.subject),"Duplicate"===e?this.editForm=!1:"Edit"===e&&(this.origName=this.profileForm.name),this.actionName=e,this.title="".concat(e," profile"),this.$refs.modalProfile.show()},onCertTypeSelect:function(t){"user"===t?(this.profileForm.extendedKeyUsage.includes("clientAuth")||this.profileForm.extendedKeyUsage.push("clientAuth"),this.profileForm.keyUsage.includes("keyEncipherment")||this.profileForm.keyUsage.push("keyEncipherment"),this.profileForm.keyUsage.includes("dataEncipherment")||this.profileForm.keyUsage.push("dataEncipherment"),this.profileForm.keyUsage.includes("nonRepudiation")||this.profileForm.keyUsage.push("nonRepudiation")):"email"===t?(this.profileForm.extendedKeyUsage.includes("emailProtection")||this.profileForm.extendedKeyUsage.push("emailProtection"),this.profileForm.keyUsage.includes("keyEncipherment")||this.profileForm.keyUsage.push("keyEncipherment"),this.profileForm.keyUsage.includes("digitalSignature")||this.profileForm.keyUsage.push("digitalSignature")):"server"===t&&(this.profileForm.extendedKeyUsage.includes("serverAuth")||this.profileForm.extendedKeyUsage.push("serverAuth"),this.profileForm.keyUsage.includes("keyEncipherment")||this.profileForm.keyUsage.push("keyEncipherment"),this.profileForm.keyUsage.includes("digitalSignature")||this.profileForm.keyUsage.push("digitalSignature"),this.profileForm.keyUsage.includes("nonRepudiation")||this.profileForm.keyUsage.push("nonRepudiation"))},onCertTypeRemove:function(t){var e=this;this.profileForm.certType.includes(t)&&(this.profileForm.certType=this.profileForm.certType.filter((function(e){return e!==t}))),this.profileForm.extendedKeyUsage=[],this.profileForm.keyUsage=[],this.profileForm.certType.forEach((function(t){console.log(t),e.onCertTypeSelect(t)}))},addProfile:function(t){var e=this,o="".concat(this.api_host,"/profiles");c.a.post(o,t).then((function(t){var o="success"===t.data.status?"success":"danger";e.$root.getProfiles(),e.$root.show(t.data.message,o)})).catch((function(t){console.error(t),e.$root.show(t,"danger",60)}))},updateProfile:function(t){var e=this,o="".concat(this.api_host,"/profiles/").concat(t.name);c.a.put(o,t).then((function(t){var o="success"===t.data.status?"success":"danger";e.$root.getProfiles(),e.$root.show(t.data.message,o)})).catch((function(t){console.error(t),e.$root.show(t,"danger",60)}))},onSubmit:function(t){if(t.preventDefault(),this.profileForm.DN.includes("CN="))return this.$root.show("You cannot define CN in profile subject","danger"),!1;var e=this.$root.buildSubject(this.profileForm.DN);if(!e)return this.$root.show("Invalid subject string, should be /C=XX/ST=XX/L=XX/O=XX at least"),!1;var o={name:this.profileForm.name,origName:this.origName,keyType:this.profileForm.keyType,keyLen:this.profileForm.keyLen,duration:this.profileForm.duration,digest:this.profileForm.digest,altnames:this.profileForm.altnames,domain:this.profileForm.domain,subject:e,keyUsage:this.profileForm.keyUsage,extendedKeyUsage:this.profileForm.extendedKeyUsage,certType:this.profileForm.certType};return this.editForm?this.updateProfile(o):this.addProfile(o),this.$refs.modalProfile.hide(),this.profileForm=this.$root.profileForm,this.editForm=!1,!0},onReset:function(t){return t.preventDefault(),this.$refs.modalProfile.hide(),this.profileForm=this.$root.profileForm,this.editForm=!1,!0}}},tt=Z,et=(o("42a3"),Object(g["a"])(tt,Q,Y,!1,null,null,null)),ot=et.exports,at={data:function(){return{api_host:this.$root.privateAPI,profileForm:this.$root.profileForm}},components:{modalProfile:ot},methods:{showProfileModal:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Create";this.$refs.modalProfile.showModal(t,e)},editProfile:function(t){this.showProfileModal(t,"Edit")},duplicateProfile:function(t){var e=JSON.parse(JSON.stringify(t));e.name="".concat(e.name," (duplicate)"),this.showProfileModal(e,"Duplicate")},deleteProfile:function(t){var e=this,o="".concat(this.api_host,"/profiles/").concat(t.name);c.a.delete(o).then((function(t){var o="success"===t.data.status?"success":"danger";"success"===o?e.$root.getProfiles():e.$root.show(t.data.message,o)})).catch((function(t){console.error(t),e.$root.show(t,"danger",60)}))}}},st=at,rt=(o("c78c"),Object(g["a"])(st,G,H,!1,null,null,null)),it=rt.exports,nt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container"},[o("div",{staticClass:"row"},[t._m(0),o("div",{staticClass:"col-sm-2"},[o("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"button"},on:{click:function(e){return t.showAdminModal(null)}}},[o("i",{staticClass:"fa fa-plus-circle"}),t._v("\n            Add Admin\n      ")])])]),o("div",{staticClass:"row"},[o("div",{staticClass:"col-sm-12"},[o("table",{staticClass:"table table-hover"},[t._m(1),o("tbody",t._l(this.$root.admins,(function(e,a){return o("tr",{key:a},[o("td",[t._v(t._s(e.name))]),o("td",[t._v(t._s(e.DN))]),o("td",{staticClass:"text-right"},[o("i",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-times text-danger pointer",attrs:{title:"Delete admin"},on:{click:function(o){return t.deleteAdmin(e.DN)}}})])])})),0)])])]),o("modal-admin",{ref:"modalAdmin"})],1)},lt=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"col-sm-10"},[o("h1",[o("i",{staticClass:"fa fa-user-shield"}),t._v(" Admins")])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("thead",[o("tr",[o("th",{attrs:{scope:"col"}},[t._v("Name")]),o("th",{attrs:{scope:"col"}},[t._v("DN")]),o("th",{staticClass:"text-right",attrs:{scope:"col"}},[t._v("Actions")])])])}],ct=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("b-modal",{ref:"modalAdmin",attrs:{title:t.title,size:"lg","hide-footer":""}},[o("b-form",{staticClass:"w-100",on:{submit:t.onSubmit,reset:t.onReset}},[o("b-card",{attrs:{"bg-variant":"light"}},[o("b-form-group",{staticClass:"mb-0",attrs:{id:"form-profile-group",label:"Admin","label-for":"form-profile-input","label-cols-sm":"3","label-align-sm":"right"}},[o("b-form-text",{attrs:{id:"form-dn-input",size:"lg"}},[t._v(t._s(t.nodeAdmins.Profile)+"\n        ")])],1)],1),o("b-form-group",{staticClass:"controls"},["Show"!==t.actionName?o("b-button",{attrs:{type:"submit",variant:"primary"}},[o("i",{staticClass:"fa fa-plus-circle"}),o("span",[t._v(t._s(t.actionName)+" admin")])]):o("b-button",{attrs:{type:"reset",variant:"danger"}},[o("i",{staticClass:"fa fa-times"}),t._v("\n        Close\n      ")]),"Show"!==t.actionName?o("b-button",{attrs:{type:"reset",variant:"danger"}},[o("i",{staticClass:"fa fa-ban"}),t._v("\n        Cancel\n      ")]):t._e()],1)],1)],1)},dt=[],mt={data:function(){return{api_host:this.$root.privateAPI,adminForm:this.$root.adminForm,actionName:null,title:null}},name:"ModalAdmin",methods:{showModal:function(t,e){this.editForm=Boolean(t),this.title="".concat(e," Admin"),this.actionName="Duplicate"===e?"Create":e,this.$refs.modalNode.show()},addAdmin:function(t){var e=this,o="".concat(this.api_host,"/admins");c.a.post(o,t).then((function(t){var o="success"===t.data.status?"success":"danger";"success"===o&&e.$root.getNodes(),e.$root.show(t.data.message,o)})).catch((function(t){console.error(t),e.$root.show(t,"danger",60)}))},onSubmit:function(t){t.preventDefault(),this.$refs.modalNode.hide();var e={DN:this.adminForm.DN};this.addAdmin(e),this.$refs.modalNode.hide(),this.adminForm=this.$root.adminForm},onReset:function(t){t.preventDefault(),this.$refs.modalNode.hide(),this.adminForm=this.$root.adminForm}}},ut=mt,ft=(o("89a1"),Object(g["a"])(ut,ct,dt,!1,null,null,null)),ht=ft.exports,pt={data:function(){return{api_host:this.$root.privateAPI}},components:{modalAdmin:ht},methods:{showAdminModal:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Create";this.$refs.modalAdmin.showModal(t,e)},deleteProfile:function(t){var e=this,o="".concat(this.api_host,"/admins/").concat(t.name);c.a.delete(o).then((function(t){var o="success"===t.data.status?"success":"danger";"success"===o?e.$root.getAdmins():e.$root.show(t.data.message,o)})).catch((function(t){console.error(t),e.$root.show(t,"danger",60)}))}}},bt=pt,gt=(o("a15f"),Object(g["a"])(bt,nt,lt,!1,null,null,null)),vt=gt.exports;d["default"].use(w["a"]);var yt=new w["a"]({routes:[{path:"/",name:"Home",component:P},{path:"/nodes",name:"Nodes",component:W},{path:"/profiles",name:"Profiles",component:it},{path:"/admins",name:"Admins",component:vt}],mode:"history"}),Ft="127.0.0.1",Ct=8e3,Nt="http://".concat(Ft,":").concat(Ct),_t="http://".concat(Ft,":").concat(Ct,"/private");d["default"].config.productionTip=!1,d["default"].use(a["a"]),d["default"].use(r.a),d["default"].component("multiselect",n.a),new d["default"]({el:"#app",router:yt,components:{App:_,VueSidebarMenu:r.a},template:"<App/>",render:function(t){return t(_)},data:function(){return{profiles:[],nodes:[],profileOptions:{CertTypes:[],Digest:[],KeyLen:[],KeyTypes:[],Usages:[],ExtendedUsages:[]},admins:[],privateAPI:_t,publicAPI:Nt,message:"",message_class:"",message_dismiss:10,showMessage:!1,profileForm:{options:{CertTypes:[],Digest:[],KeyLen:[],KeyTypes:[],Usages:[],ExtendedUsages:[]},name:"",keyType:"rsa",keyLen:"4096",digest:"sha256",duration:1,altnames:!1,domain:"yourdomain.com",subject:[],keyUsage:[],extendedKeyUsage:[],certType:[]},nodeForm:{options:[{value:null,text:"Select a profile",disabled:!0,selected:!0}],State:"Init",Serial:"",Profile:"",CN:"",DN:"",KeyLen:"",Digest:"",Duration:"",Start:"",Expire:"",KeyType:"",Sans:[]}}},methods:{forceFileDownload:function(t){var e=window.URL.createObjectURL(new Blob([t.data])),o=document.createElement("a");o.href=e,o.setAttribute("download",t.name),document.body.appendChild(o),o.click()},downloadNode:function(t,e,o){var a=this,s=btoa(t);c.a.get("".concat(Nt,"/certs/").concat(s)).then((function(t){var s="success"===t.data.status?"success":"danger";"success"===s?a.forceFileDownload({name:"".concat(o,".").concat(e,".crt"),data:t.data.certificate}):(console.error(t.data.message),a.show(t.data.message,"danger"))})).catch((function(t){console.error(t),a.show(t,"danger",60)}))},getProfiles:function(){var t=this,e="".concat(_t,"/profiles");c.a.get(e).then((function(e){var o="success"===e.data.status?"success":"danger";"success"!==o&&t.show(e.data.message,o),t.profiles=e.data.profiles})).catch((function(e){console.error(e),t.show(e,"danger",60)}))},getNodes:function(){var t=this,e="".concat(_t,"/nodes");c.a.get(e).then((function(e){var o="success"===e.data.status?"success":"danger";"success"!==o&&t.show(e.data.message,o),t.nodes=e.data.nodes})).catch((function(e){console.error(e),t.show(e,"danger",60)}))},getOptions:function(){var t=this,e="".concat(_t,"/options");c.a.get(e).then((function(e){var o="success"===e.data.status?"success":"danger";return"success"!==o?(t.show(e.data.message,o),{CertTypes:[],Digest:[],KeyLen:[],KeyTypes:[],Usages:[],ExtendedUsages:[]}):(t.profileOptions=e.data.options,e.data.options)})).catch((function(e){console.error(e),t.show(e,"danger",60)}))},initProfile:function(t){this.getOptions();var e={};return t?(e.name=t.name,e.type=t.type,e.domain=t.domain,e.keyType=t.keyType,e.keyLen=t.keyLen,e.digest=t.digest,e.duration=t.duration,e.altnames=t.altnames,e.subject=t.subject,e.keyUsage=t.keyUsage,e.extendedKeyUsage=t.extendedKeyUsage,e.certType=t.certType):e=this.profileForm,e.options=this.profileForm.options,e},initNode:function(t){var e={};return t?(e.State=t.State,e.Profile=t.Profile,e.CN=t.CN,e.DN=t.DN,e.Serial=t.Serial,e.KeyLen=t.KeyLen,e.Digest=t.Digest,e.Start=t.Start_human,e.Expire=t.Expire_human,e.Duration=t.Duration,e.KeyType=t.KeyType,e.Domain=t.Domain,e.Altnames=t.Altnames,e.Sans=t.Sans,t.options?e.options=t.options:e.options=this.nodeForm.options):e=this.nodeForm,this.profiles.forEach((function(t){var o={value:t.name,text:t.name};e.options.some((function(e){return e.value===t.name}))||e.options.push(o)})),e},getNode:function(t){var e={};return this.nodes.forEach((function(o){o.DN===t&&(e=o)})),e},getProfile:function(t){var e={};return this.profiles.forEach((function(o){o.name===t&&(e=o)})),e},profileSupport:function(t,e){var o=this.getProfile(t);return!(!o.certType.includes(e)&&!o.extendedKeyUsage.includes(e))},buildDn:function(t){var e="";return t.forEach((function(t){e+="/".concat(Object.keys(t)[0],"=").concat(Object.values(t)[0])})),e},buildSubject:function(t){if(!t.startsWith("/"))return!1;if(!t.includes("/"))return!1;var e=[],o=t.split("/");return o.forEach((function(t){var o=t.split("="),a={};a[o[0]]=o[1],e.push(a)})),e},show:function(t,e){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;this.$root.message=t,this.$root.message_class=e,this.$root.message_dismiss=o,this.$root.showMessage=!0},hide:function(){this.$root.message="",this.$root.showMessage=!1}},created:function(){this.getProfiles()}})},6015:function(t,e,o){},"66e8":function(t,e,o){"use strict";var a=o("f475"),s=o.n(a);s.a},"832f":function(t,e,o){"use strict";var a=o("233d"),s=o.n(a);s.a},"89a1":function(t,e,o){"use strict";var a=o("07b2"),s=o.n(a);s.a},"8b28":function(t,e,o){"use strict";var a=o("8fe9"),s=o.n(a);s.a},"8fe9":function(t,e,o){},a15f:function(t,e,o){"use strict";var a=o("ac9a"),s=o.n(a);s.a},a9d7:function(t,e,o){},ac9a:function(t,e,o){},b0a0:function(t,e,o){"use strict";var a=o("07bb"),s=o.n(a);s.a},c78c:function(t,e,o){"use strict";var a=o("2a84"),s=o.n(a);s.a},f475:function(t,e,o){}});
//# sourceMappingURL=app.fb9e32e3.js.map