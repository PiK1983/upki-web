(function(e){function t(t){for(var s,i,n=t[0],l=t[1],c=t[2],m=0,u=[];m<n.length;m++)i=n[m],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&u.push(a[i][0]),a[i]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);d&&d(t);while(u.length)u.shift()();return r.push.apply(r,c||[]),o()}function o(){for(var e,t=0;t<r.length;t++){for(var o=r[t],s=!0,n=1;n<o.length;n++){var l=o[n];0!==a[l]&&(s=!1)}s&&(r.splice(t--,1),e=i(i.s=o[0]))}return e}var s={},a={app:0},r=[];function i(t){if(s[t])return s[t].exports;var o=s[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=e,i.c=s,i.d=function(e,t,o){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(o,s,function(t){return e[t]}.bind(null,s));return o},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=t,n=n.slice();for(var c=0;c<n.length;c++)t(n[c]);var d=l;r.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"07b2":function(e,t,o){},"07bb":function(e,t,o){},"233d":function(e,t,o){},"2a84":function(e,t,o){},3562:function(e,t,o){"use strict";var s=o("a9d7"),a=o.n(s);a.a},"42a3":function(e,t,o){"use strict";var s=o("6015"),a=o.n(s);a.a},"56d7":function(e,t,o){"use strict";o.r(t);o("28a5"),o("f559"),o("8615"),o("456d"),o("6762"),o("2fdb"),o("ac6a"),o("7f7f"),o("cadf"),o("551c"),o("f751"),o("097d"),o("f9e3"),o("b15b");var s=o("5f5b"),a=o("4776"),r=o.n(a),i=o("8e5f"),n=o.n(i),l=o("bc3a"),c=o.n(l),d=o("2b0e"),m=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"app"}},[o("link",{attrs:{rel:"stylesheet",href:"https://use.fontawesome.com/releases/v5.2.0/css/all.css",integrity:"sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ",crossorigin:"anonymous"}}),o("sidebar-menu",{attrs:{menu:e.menu,width:e.width,collapsed:e.collapsed}}),o("router-view"),this.$root.showMessage?o("alert",{attrs:{message:this.$root.message,variant:this.$root.message_class,countDown:this.$root.message_dismiss}}):e._e()],1)},u=[],f=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("b-container",[o("b-row",[o("b-col",{attrs:{"align-self":"center"}},[o("b-alert",{attrs:{variant:e.variant,show:e.countDown,dismissible:""},on:{dismissed:e.showAlert,"dismiss-count-down":e.countDownChanged}},[e._v(e._s(e.message))])],1)],1)],1)},h=[],p={data:function(){return{dismissCountDown:10,showAlert:!1}},props:["message","variant","countDown"],methods:{countDownChanged:function(e){this.showAlert=e}}},g=p,b=o("2877"),v=Object(b["a"])(g,f,h,!1,null,null,null),y=v.exports,F={name:"App",components:{alert:y},data:function(){return{width:"200px",collapsed:!0,rtl:!0,menu:[{header:!0,title:"uPKI menu"},{href:"/",title:"Home",icon:"fa fa-home"},{href:"/nodes",title:"Certificates",icon:"fa fa-medal"},{href:"/profiles",title:"Profiles",icon:"fa fa-layer-group"},{href:"/admins",title:"Admins",icon:"fa fa-user-shield"}]}}},C=F,N=(o("60bc"),o("b0a0"),Object(b["a"])(C,m,u,!1,null,null,null)),_=N.exports,w=o("8c4f"),$=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"container"},[o("h1",{staticClass:"title text-center"},[e._v("Welcome on Î¼PKI administration!")]),o("div",{staticClass:"logo"}),o("div",{staticClass:"row"},[o("div",{staticClass:"col-sm-4 offset-sm-2 text-center"},[o("b-button",{attrs:{type:"button",block:"",variant:"success",size:"lg"},on:{click:function(t){return e.downloadCA()}}},[o("i",{staticClass:"fa fa-download"}),e._v("\n        Download CA certificate\n      ")])],1),o("div",{staticClass:"col-sm-4 text-center"},[o("b-button",{attrs:{type:"button",block:"",variant:"primary",size:"lg"},on:{click:function(t){return e.downloadCRL()}}},[o("i",{staticClass:"fa fa-download"}),e._v("\n        Download CRL\n      ")])],1)])])},k=[],S={name:"Home",data:function(){return{api_host:this.$root.publicAPI}},methods:{downloadCA:function(){var e=this;c.a.get("".concat(this.api_host,"/certs/ca.crt")).then((function(t){var o="success"===t.data.status?"success":"danger";"success"===o?e.$root.forceFileDownload({name:"ca.crt",data:t.data.certificate}):e.$root.show(t.data.message,"danger")})).catch((function(t){console.error(t),e.$root.show(t,"danger",60)}))},downloadCRL:function(){var e=this;c.a.get("".concat(this.api_host,"/certs/crl.pem")).then((function(t){var o="success"===t.data.status?"success":"danger";"success"===o?e.$root.forceFileDownload({name:"crl.pem",data:t.data.certificate}):e.$root.show(t.data.message,"danger")})).catch((function(t){console.error(t),e.$root.show(t,"danger",60)}))}}},x=S,D=(o("3562"),Object(b["a"])(x,$,k,!1,null,null,null)),P=D.exports,U=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"container"},[o("div",{staticClass:"row"},[e._m(0),o("div",{staticClass:"col-sm-2"},[o("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"button"},on:{click:function(t){return e.showNodeModal(null,"Create")}}},[o("i",{staticClass:"fa fa-plus-circle"}),e._v("\n            Add Certificate\n      ")])])]),o("div",{staticClass:"row"},[o("div",{staticClass:"col-sm-12"},[o("table",{staticClass:"table table-hover"},[e._m(1),o("tbody",e._l(this.$root.nodes,(function(t,s){return o("tr",{key:s,class:t.State.toLowerCase(),on:{click:function(o){return e.displayNode(t.DN)}}},[o("td",[e.hasFeature(t.Profile,"sslCA")?o("i",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-star",attrs:{title:"CA"}}):e._e(),e.hasFeature(t.Profile,"clientAuth")?o("i",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-user",attrs:{title:"User"}}):e._e(),e.hasFeature(t.Profile,"serverAuth")?o("i",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-server",attrs:{title:"Server"}}):e._e(),e.hasFeature(t.Profile,"emailProtection")?o("i",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-envelope",attrs:{title:"Email"}}):e._e()]),o("td",[e._v(e._s(e._f("capitalize")(t.Profile)))]),o("td",[e._v(e._s(t.CN))]),o("td",[e._v(e._s(t.Created_human))]),o("td",[e._v(e._s(t.Duration)+" days")]),o("td",{staticClass:"text-right"},["Init"===t.State?o("i",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-edit text-primary pointer",attrs:{title:"Edit node"},on:{click:function(o){return o.stopPropagation(),e.editNode(t.DN)}}}):e._e(),"Init"===t.State?o("i",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-file-signature pointer",attrs:{title:"Sign node"},on:{click:function(o){return o.stopPropagation(),e.showNodeSign(t)}}}):e._e(),"Init"===t.State?o("i",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-magic text-warning pointer",attrs:{title:"Get generation command"},on:{click:function(o){return o.stopPropagation(),e.getCommand(t)}}}):e._e(),"Valid"===t.State?o("i",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-download pointer",attrs:{title:"Download certificate"},on:{click:function(o){return o.stopPropagation(),e.downloadCert(t.DN,t.CN,t.Profile)}}}):e._e(),"Valid"===t.State?o("i",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-ban text-danger pointer",attrs:{title:"Revoke node"},on:{click:function(o){return o.stopPropagation(),e.revokeNode(t.DN)}}}):e._e(),"Revoked"===t.State?o("i",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-check text-success pointer",attrs:{title:"Restore node"},on:{click:function(o){return o.stopPropagation(),e.restoreNode(t.DN)}}}):e._e(),["Revoked","Expired","Init"].includes(t.State)?o("i",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-trash text-danger pointer",attrs:{title:"Delete node"},on:{click:function(o){return o.stopPropagation(),e.deleteNode(t.DN)}}}):e._e()])])})),0)])])]),o("modal-node",{ref:"modalNode"}),o("modal-sign",{ref:"modalSign"})],1)},A=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"col-sm-10"},[o("h1",[o("i",{staticClass:"fa fa-medal"}),e._v(" Certificates")])])},function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("thead",[o("tr",[o("th",{attrs:{scope:"col"}},[e._v("Type")]),o("th",{attrs:{scope:"col"}},[e._v("Profile")]),o("th",{attrs:{scope:"col"}},[e._v("Name (CN)")]),o("th",{attrs:{scope:"col"}},[e._v("Creation")]),o("th",{attrs:{scope:"col"}},[e._v("Duration")]),o("th",{staticClass:"text-right",attrs:{scope:"col"}},[e._v("Actions")])])])}],E=(o("6b54"),function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("b-modal",{ref:"modalNode",attrs:{title:e.title,size:"lg","hide-footer":""}},[o("b-form",{staticClass:"w-100",on:{submit:e.onSubmit,reset:e.onReset}},[o("b-card",{attrs:{"bg-variant":"light"}},["Show"===e.actionName?o("b-form-group",{staticClass:"mb-0",attrs:{id:"form-cn-group",label:"Name (CN)","label-cols-sm":"3","label-align-sm":"right","label-for":"form-cn-text"}},[o("b-alert",{staticClass:"pt-1",attrs:{id:"form-cn-text",show:"",variant:"light"}},[e._v(e._s(e.nodeForm.CN)+"\n        ")])],1):e._e(),o("b-form-group",{staticClass:"mb-0",attrs:{id:"form-profile-group",label:"Profile","label-for":"form-profile-input","label-cols-sm":"3","label-align-sm":"right"}},["Show"!==e.actionName?o("b-form-select",{attrs:{id:"form-profile-input",options:this.$root.nodeForm.options,placeholder:"Select profile",required:""},on:{change:e.onProfileSelect},model:{value:e.nodeForm.Profile,callback:function(t){e.$set(e.nodeForm,"Profile",t)},expression:"nodeForm.Profile"}}):o("b-alert",{staticClass:"pt-1",attrs:{id:"form-profile-input",show:"",variant:"light"}},[e._v(e._s(e.nodeForm.Profile)+"\n        ")])],1),"Show"!==e.actionName?o("b-form-group",{attrs:{id:"form-cn-group",label:"Name (CN)","label-cols-sm":"3","label-align-sm":"right","label-for":"form-cn-input"}},[o("b-form-input",{attrs:{id:"form-cn-input",required:"",placeholder:"Set Common Name (CN)"},on:{change:function(t){return e.onCnSet(e.nodeForm.CN)}},model:{value:e.nodeForm.CN,callback:function(t){e.$set(e.nodeForm,"CN",t)},expression:"nodeForm.CN"}})],1):e._e(),o("b-form-group",{staticClass:"mb-0",attrs:{id:"form-dn-group",label:"Qualified Name (DN)","label-for":"form-dn-input","label-cols-sm":"3","label-align-sm":"right"}},[o("b-alert",{staticClass:"pt-1 dn",attrs:{id:"form-dn-input",show:"",variant:"light"}},[e._v(e._s(e.calculatedDN)+"\n        ")])],1),o("b-form-group",{staticClass:"mb-0",attrs:{id:"form-domain-group",label:"Domain","label-for":"form-domain-text","label-cols-sm":"3","label-align-sm":"right"}},[o("b-alert",{staticClass:"pt-1",attrs:{id:"form-domain-text",show:"",variant:"light"}},[e._v(e._s(e.nodeForm.Domain)+"\n        ")])],1),["Valid","Revoked"].includes(e.nodeForm.State)?o("b-form-group",{attrs:{id:"form-sn-group",label:"Serial number","label-cols-sm":"3","label-align-sm":"right","label-for":"form-sn-text"}},[o("b-alert",{staticClass:"pt-1",attrs:{id:"form-sn-text",show:"",variant:"light"}},[e._v(e._s(e.nodeForm.Serial)+"\n        ")])],1):e._e(),o("b-form-group",{staticClass:"mb-0",attrs:{id:"form-duration-group",label:"Duration","label-for":"form-duration-input","label-cols-sm":"3","label-align-sm":"right"}},["Show"!==e.actionName?o("b-form-input",{attrs:{id:"form-duration-input",type:"text",required:"",placeholder:"Choose duration"},model:{value:e.nodeForm.Duration,callback:function(t){e.$set(e.nodeForm,"Duration",t)},expression:"nodeForm.Duration"}}):o("b-alert",{staticClass:"pt-1",attrs:{id:"form-duration-input",show:"",variant:"light"}},[e._v(e._s(e.nodeForm.Duration)+"\n        ")])],1),"Valid"===e.nodeForm.State?o("b-form-group",{attrs:{id:"form-start-group",label:"Validity Start","label-cols-sm":"3","label-align-sm":"right","label-for":"form-start-text"}},[o("b-alert",{staticClass:"pt-1",attrs:{id:"form-start-text",show:"",variant:"light"}},[e._v(e._s(e.nodeForm.Start)+"\n        ")])],1):e._e(),"Valid"===e.nodeForm.State?o("b-form-group",{attrs:{id:"form-end-group",label:"Validity End","label-cols-sm":"3","label-align-sm":"right","label-for":"form-end-text"}},[o("b-alert",{staticClass:"pt-1",attrs:{id:"form-end-text",show:"",variant:"light"}},[e._v(e._s(e.nodeForm.Expire)+"\n        ")])],1):e._e(),"Show"===e.actionName||e.nodeForm.Altnames?e._e():o("b-form-group",{staticClass:"mb-0",attrs:{id:"form-adv-group","label-cols-sm":"3","label-align-sm":"right"}},[o("b-form-checkbox",{attrs:{id:"form-adv","unchecked-value":!1},model:{value:e.altnames,callback:function(t){e.altnames=t},expression:"altnames"}},[e._v("Add alternate names ?\n          ")])],1),o("b-form-group",{directives:[{name:"show",rawName:"v-show",value:e.nodeForm.Altnames||e.altnames,expression:"nodeForm.Altnames || altnames"}],staticClass:"mb-0",attrs:{id:"form-sans-group",label:"Alternate Names","label-for":"form-alt-input","label-cols-sm":"3","label-align-sm":"right"},model:{value:e.nodeForm.Sans,callback:function(t){e.$set(e.nodeForm,"Sans",t)},expression:"nodeForm.Sans"}},["Show"!==e.actionName?o("i",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-plus-circle text-success",attrs:{id:"form-alt-input",title:"Add name"},on:{click:function(t){return e.addAltName(!0)}}}):e._e()]),o("b-form-group",{directives:[{name:"show",rawName:"v-show",value:e.nodeForm.Altnames||e.altnames,expression:"nodeForm.Altnames || altnames"}],staticClass:"mb-0",attrs:{"label-cols-sm":"3","label-align-sm":"right"}},[o("table",{staticClass:"altnames-list"},e._l(e.nodeForm.Sans,(function(t,s){return o("tr",{key:s,staticClass:"altname-entry"},[o("td",["Show"!==e.actionName?o("b-form-input",{attrs:{placeholder:"Set Alternate Name"},model:{value:e.nodeForm.Sans[s],callback:function(t){e.$set(e.nodeForm.Sans,s,t)},expression:"nodeForm.Sans[index]"}}):o("b-alert",{staticClass:"pt-1",attrs:{show:"",variant:"light"}},[e._v(e._s(t)+"\n              ")])],1),o("td",["Show"!==e.actionName?o("i",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-times-circle text-danger",attrs:{title:"Remove"},on:{click:function(t){return e.removeAltName(s)}}}):e._e()])])})),0)])],1),o("b-form-group",{staticClass:"controls"},["Show"!==e.actionName?o("b-button",{attrs:{type:"submit",variant:"primary"}},[o("i",{staticClass:"fa fa-plus-circle"}),o("span",[e._v(e._s(e.actionName)+" node")])]):o("b-button",{attrs:{type:"reset",variant:"danger"}},[o("i",{staticClass:"fa fa-times"}),e._v("\n        Close\n      ")]),"Show"!==e.actionName?o("b-button",{attrs:{type:"reset",variant:"danger"}},[o("i",{staticClass:"fa fa-ban"}),e._v("\n        Cancel\n      ")]):e._e()],1)],1)],1)}),K=[],T={data:function(){return{profiles:this.$root.profiles,api_host:this.$root.privateAPI,nodeForm:this.$root.nodeForm,actionName:null,altnames:!1,editForm:!1,title:null,calculatedDN:null}},name:"ModalNode",methods:{showModal:function(e,t){this.editForm=Boolean(e),this.title="".concat(t," Certificate"),this.actionName="Duplicate"===t?"Create":t,this.nodeForm=this.$root.initNode(e),console.error(this.nodeForm),this.nodeForm.DN.includes("/CN=")?this.calculatedDN=this.nodeForm.DN:this.calculatedDN="".concat(this.nodeForm.DN,"/CN=").concat(this.nodeForm.CN),this.addAltName(),this.$refs.modalNode.show()},onProfileSelect:function(e){var t=this.$root.getProfile(e);this.nodeForm.DN=this.$root.buildDn(t.subject),this.nodeForm.Duration=t.duration,this.nodeForm.CertType=t.certType,this.nodeForm.Digest=t.digest,this.nodeForm.KeyType=t.keyType,this.nodeForm.KeyLen=t.keyLen,this.nodeForm.Altnames=t.altnames,this.nodeForm.Domain=t.domain,this.nodeForm.Sans=[],this.nodeForm.CN?this.calculatedDN="".concat(this.nodeForm.DN,"/CN=").concat(this.nodeForm.CN):this.calculatedDN=this.nodeForm.DN,this.addAltName()},onCnSet:function(e){this.calculatedDN="".concat(this.nodeForm.DN,"/CN=").concat(e),this.nodeForm.Sans=[],this.addAltName()},addAltName:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if("Init"!==this.nodeForm.State||!this.nodeForm.CN)return!1;var t=null;return!this.nodeForm.Altnames||this.nodeForm.CN.includes(".")||this.nodeForm.CN.includes("@")?t=this.nodeForm.CN:this.$root.profileSupport(this.nodeForm.Profile,"email")?t="".concat(this.nodeForm.CN,"@").concat(this.nodeForm.Domain):this.$root.profileSupport(this.nodeForm.Profile,"server")&&(t="".concat(this.nodeForm.CN,".").concat(this.nodeForm.Domain)),e?this.nodeForm.Sans.push(t):t&&!this.nodeForm.Sans.includes(t)&&this.nodeForm.Sans.push(t),!0},removeAltName:function(e){this.nodeForm.Sans.splice(e,1)},addNode:function(e){var t=this,o="".concat(this.api_host,"/nodes");c.a.post(o,e).then((function(e){var o="success"===e.data.status?"success":"danger";"success"===o&&t.$root.getNodes(),t.$root.show(e.data.message,o)})).catch((function(e){console.error(e),t.$root.show(e,"danger",60)}))},updateNode:function(e){var t=this,o=btoa(e.DN),s="".concat(this.api_host,"/nodes/").concat(o);c.a.put(s,e).then((function(e){var o="success"===e.data.status?"success":"danger";t.$root.getNodes(),t.$root.show(e.data.message,o)})).catch((function(e){console.error(e),t.$root.show(e,"danger",60)}))},onSubmit:function(e){e.preventDefault(),this.$refs.modalNode.hide();var t={Profile:this.nodeForm.Profile,CN:this.nodeForm.CN,DN:this.calculatedDN,Digest:this.nodeForm.Digest,Duration:this.nodeForm.Duration,KeyType:this.nodeForm.KeyType,KeyLen:this.nodeForm.KeyLen,Domain:this.nodeForm.Domain,SANS:this.nodeForm.Sans};this.editForm?this.updateNode(t):this.addNode(t),this.$refs.modalNode.hide(),this.nodeForm=this.$root.nodeForm,this.editForm=!1},onReset:function(e){e.preventDefault(),this.$refs.modalNode.hide(),this.nodeForm=this.$root.nodeForm,this.editForm=!1}}},R=T,j=(o("8b28"),Object(b["a"])(R,E,K,!1,null,null,null)),O=j.exports,M=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("b-modal",{ref:"modalSign",attrs:{title:"Sign "+e.nodeForm.CN+" ("+e.nodeForm.Profile+")",size:"lg","hide-footer":""}},[o("b-form",{on:{submit:e.onSubmit,reset:e.onReset}},[o("b-card",{attrs:{"bg-variant":"light"}},[o("b-form-group",{staticClass:"mb-0",attrs:{id:"form-csr-group",label:"Select Certificate Signing Request (CSR)","label-for":"form-csr-input","label-cols-sm":"5","label-align-sm":"right"}},[o("b-form-file",{attrs:{accept:".csr, application/csrattrs",placeholder:"Drop CSR file here...","drop-placeholder":"Drop CSR file here..."},on:{change:e.selectCSR},model:{value:e.csr_file,callback:function(t){e.csr_file=t},expression:"csr_file"}})],1),o("b-form-group",[o("b-form-textarea",{staticClass:"raw_data",attrs:{id:"form-csr-input",placeholder:"or copy CSR content here...",rows:"10","max-rows":"15",required:""},model:{value:e.csr_data,callback:function(t){e.csr_data=t},expression:"csr_data"}})],1)],1),o("b-form-group",{staticClass:"controls"},[o("b-button",{attrs:{type:"submit",variant:"success"}},[o("i",{staticClass:"fa fa-plus-circle"}),o("span",[e._v("Sign node")])]),o("b-button",{attrs:{type:"reset",variant:"danger"}},[o("i",{staticClass:"fa fa-ban"}),e._v("\n        Cancel\n      ")])],1)],1)],1)},L=[],I={data:function(){return{api_host:this.$root.privateAPI,node_host:this.$root.publicAPI,nodeForm:this.$root.nodeForm,csr_data:null,csr_file:null}},name:"ModalSign",methods:{showModal:function(e){this.nodeForm=this.$root.initNode(e),this.$refs.modalSign.show()},selectCSR:function(e){var t=this,o=new FileReader;o.readAsText(e.target.files[0],"UTF-8"),o.onload=function(e){t.csr_data=e.target.result},o.onerror=function(){t.$root.show("Unable to read File","danger")},this.csr_data.includes("-----BEGIN CERTIFICATE REQUEST-----")||this.$root.show("This does not seems to be a valid CSR file","danger")},onSubmit:function(e){var t=this;e.preventDefault();var o="".concat(this.api_host,"/sign"),s={Profile:this.nodeForm.Profile,CN:this.nodeForm.CN,DN:"".concat(this.nodeForm.DN),CSR:this.csr_data};c.a.post(o,s).then((function(e){var o="success"===e.data.status?"success":"danger";"success"===o?t.$root.getNodes():(console.error(e.data.message),t.$root.show(e.data.message,"danger"))})).catch((function(e){console.error(e),t.$root.show(e,"danger",60)})),this.$refs.modalSign.hide(),this.nodeForm=this.$root.nodeForm},onReset:function(e){e.preventDefault(),this.$refs.modalSign.hide(),this.nodeForm=this.$root.nodeForm}}},z=I,q=(o("832f"),Object(b["a"])(z,M,L,!1,null,null,null)),V=q.exports,X={filters:{capitalize:function(e){if(!e)return"";var t=e.toString();return t.charAt(0).toUpperCase()+t.slice(1)}},data:function(){return{api_host:this.$root.privateAPI,node_host:this.$root.publicAPI}},components:{modalNode:O,modalSign:V},methods:{showNodeModal:function(e,t){this.$refs.modalNode.showModal(e,t)},showNodeSign:function(e){this.$refs.modalSign.showModal(e)},editNode:function(e){var t=this.$root.getNode(e);this.showNodeModal(t,"Update")},displayNode:function(e){var t=this.$root.getNode(e);this.showNodeModal(t,"Show")},hasFeature:function(e,t){return this.$root.profileSupport(e,t)},downloadCert:function(e,t,o){this.$root.downloadNode(e,t,o)},getCommand:function(e){var t=this;c.a.post("".concat(this.node_host,"/magic/").concat(e.Profile),{dn:e.DN}).then((function(e){var o="success"===e.data.status?"success":"danger";"success"===o?t.$root.show(e.data.command,"success",60):t.$root.show(e.data.message,o)})).catch((function(e){console.error(e),t.$root.show(e,"danger",60)}))},revokeNode:function(e){var t=this,o="".concat(this.api_host,"/revoke");c.a.post(o,{DN:e,Reason:"admin revokation"}).then((function(e){var o="success"===e.data.status?"success":"danger";"success"===o?t.$root.getNodes():(console.log(e.data.message),t.$root.show(e.data.message,"danger"))})).catch((function(e){console.error(e),t.$root.show(e,"danger",60)}))},restoreNode:function(e){var t=this,o="".concat(this.api_host,"/unrevoke");c.a.post(o,{DN:e}).then((function(e){var o="success"===e.data.status?"success":"danger";"success"===o?t.$root.getNodes():t.$root.show(e.data.message,"danger")})).catch((function(e){console.error(e),t.$root.show(e,"danger",60)}))},deleteNode:function(e){var t=this,o=btoa(e),s="".concat(this.api_host,"/nodes/").concat(o);c.a.delete(s).then((function(e){var o="success"===e.data.status?"success":"danger";"success"===o?t.$root.getNodes():(console.error(e.data.message),t.$root.show(e.data.message,"danger"))})).catch((function(e){console.error(e),t.$root.show(e,"danger",60)}))}},created:function(){this.$root.getNodes()}},B=X,J=(o("66e8"),Object(b["a"])(B,U,A,!1,null,null,null)),W=J.exports,G=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"container"},[o("div",{staticClass:"row"},[e._m(0),o("div",{staticClass:"col-sm-2"},[o("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"button"},on:{click:function(t){return e.showProfileModal(null)}}},[o("i",{staticClass:"fa fa-plus-circle"}),e._v("\n            Add Profile\n      ")])])]),o("div",{staticClass:"row"},[o("div",{staticClass:"col-sm-12"},[o("table",{staticClass:"table table-hover"},[e._m(1),o("tbody",e._l(this.$root.profiles,(function(t,s){return o("tr",{key:s},[o("td",[t.certType.includes("sslCA")?o("i",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-star",attrs:{title:"CA"}}):e._e(),t.extendedKeyUsage.includes("clientAuth")?o("i",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-user",attrs:{title:"User"}}):e._e(),t.extendedKeyUsage.includes("serverAuth")?o("i",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-server",attrs:{title:"Server"}}):e._e(),t.extendedKeyUsage.includes("emailProtection")?o("i",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-envelope",attrs:{title:"Email"}}):e._e()]),o("td",[e._v(e._s(t.name))]),o("td",[e._v(e._s(t.domain))]),o("td",[e._v(e._s(t.duration)+" days")]),o("td",{staticClass:"text-right"},[o("i",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-edit text-primary pointer",attrs:{title:"Edit profile"},on:{click:function(o){return e.editProfile(t)}}}),o("i",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-clone text-secondary pointer",attrs:{title:"Duplicate profile"},on:{click:function(o){return e.duplicateProfile(t)}}}),o("i",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-times text-danger pointer",attrs:{title:"Delete profile"},on:{click:function(o){return e.deleteProfile(t)}}})])])})),0)])])]),o("modal-profile",{ref:"modalProfile"})],1)},H=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"col-sm-10"},[o("h1",[o("i",{staticClass:"fa fa-layer-group"}),e._v(" Profiles")])])},function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("thead",[o("tr",[o("th",{attrs:{scope:"col"}},[e._v("Type")]),o("th",{attrs:{scope:"col"}},[e._v("Name")]),o("th",{attrs:{scope:"col"}},[e._v("Domain")]),o("th",{attrs:{scope:"col"}},[e._v("Duration")]),o("th",{staticClass:"text-right",attrs:{scope:"col"}},[e._v("Actions")])])])}],Q=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("b-modal",{ref:"modalProfile",attrs:{title:e.title,size:"lg","hide-footer":""}},[o("b-form",{staticClass:"form-horizontal",on:{submit:e.onSubmit,reset:e.onReset}},[o("b-card",{attrs:{"bg-variant":"light"}},[o("b-form-group",{staticClass:"mb-0",attrs:{id:"form-name-group",label:"Name","label-for":"form-name-input","label-cols-sm":"3","label-align-sm":"right","label-class":"pt-0"}},[o("b-form-input",{attrs:{id:"form-name-input",required:"",placeholder:"Set name"},model:{value:e.profileForm.name,callback:function(t){e.$set(e.profileForm,"name",t)},expression:"profileForm.name"}})],1),o("b-form-group",{staticClass:"mb-0",attrs:{id:"form-type-group",label:"Type","label-for":"form-type-select","label-cols-sm":"3","label-align-sm":"right","label-class":"pt-0"}},[o("multiselect",{attrs:{id:"form-type-select","close-on-select":!0,multiple:!0,"clear-on-select":!1,placeholder:"Certificate Type",options:this.$root.profileOptions.CertTypes},on:{select:e.onCertTypeSelect,remove:e.onCertTypeRemove},model:{value:e.profileForm.certType,callback:function(t){e.$set(e.profileForm,"certType",t)},expression:"profileForm.certType"}})],1),o("b-form-group",{staticClass:"mb-0",attrs:{id:"form-domain-group",label:"Domain","label-for":"form-domain-input","label-cols-sm":"3","label-align-sm":"right","label-class":"pt-0"}},[o("b-form-input",{attrs:{id:"form-domain-input",required:"",placeholder:"Set domain"},model:{value:e.profileForm.domain,callback:function(t){e.$set(e.profileForm,"domain",t)},expression:"profileForm.domain"}})],1),o("b-form-group",{staticClass:"mb-0",attrs:{id:"form-duration-group",label:"Duration (days)","label-for":"form-duration-input","label-cols-sm":"3","label-align-sm":"right","label-class":"pt-0"}},[o("b-form-input",{attrs:{id:"form-duration-input",required:"",placeholder:"0"},model:{value:e.profileForm.duration,callback:function(t){e.$set(e.profileForm,"duration",t)},expression:"profileForm.duration"}})],1),o("b-form-group",{staticClass:"mb-0",attrs:{id:"form-subject-group",label:"Subject","label-for":"form-subject-input","label-cols-sm":"3","label-align-sm":"right","label-class":"pt-0"}},[o("b-form-input",{attrs:{id:"form-subject-input",required:"",placeholder:"Set subject"},model:{value:e.profileForm.DN,callback:function(t){e.$set(e.profileForm,"DN",t)},expression:"profileForm.DN"}})],1),o("b-form-group",{attrs:{id:"form-alt-group"}},[o("b-form-checkbox",{attrs:{id:"form-alt"},model:{value:e.profileForm.altnames,callback:function(t){e.$set(e.profileForm,"altnames",t)},expression:"profileForm.altnames"}},[e._v("Alternate Names ?\n        ")])],1),o("b-form-group",{attrs:{id:"form-adv-group"}},[o("b-form-checkbox",{attrs:{id:"form-adv","unchecked-value":!1},model:{value:e.advanced,callback:function(t){e.advanced=t},expression:"advanced"}},[e._v("Advanced usage ?\n        ")])],1),e.advanced?o("b-form-group",[o("b-form-group",{staticClass:"mb-0",attrs:{id:"form-keytype-group",label:"Key type","label-for":"form-keytype-select","label-cols-sm":"3","label-align-sm":"right","label-class":"pt-0"}},[o("multiselect",{attrs:{id:"form-keytype-select","close-on-select":!0,placeholder:"Key Type",options:this.$root.profileOptions.KeyTypes},model:{value:e.profileForm.keyType,callback:function(t){e.$set(e.profileForm,"keyType",t)},expression:"profileForm.keyType"}})],1),o("b-form-group",{staticClass:"mb-0",attrs:{id:"form-keylen-group",label:"Key length","label-for":"form-keylen-select","label-cols-sm":"3","label-align-sm":"right","label-class":"pt-0"}},[o("multiselect",{attrs:{id:"form-keylen-select","close-on-select":!0,placeholder:"Key length",options:this.$root.profileOptions.KeyLen},model:{value:e.profileForm.keyLen,callback:function(t){e.$set(e.profileForm,"keyLen",t)},expression:"profileForm.keyLen"}})],1),o("b-form-group",{staticClass:"mb-0",attrs:{id:"form-digest-group",label:"Algorithm","label-for":"form-digest-select","label-cols-sm":"3","label-align-sm":"right","label-class":"pt-0"}},[o("multiselect",{attrs:{id:"form-digest-select","close-on-select":!0,placeholder:"Algorithm",options:this.$root.profileOptions.Digest},model:{value:e.profileForm.digest,callback:function(t){e.$set(e.profileForm,"digest",t)},expression:"profileForm.digest"}})],1),o("b-form-group",{staticClass:"mb-0",attrs:{id:"form-usage-group",label:"Certificate usage","label-for":"form-usage-select","label-cols-sm":"3","label-align-sm":"right","label-class":"pt-0"}},[o("multiselect",{attrs:{id:"form-usage-select","close-on-select":!1,multiple:!0,"clear-on-select":!1,placeholder:"Select usages",options:this.$root.profileOptions.Usages},model:{value:e.profileForm.keyUsage,callback:function(t){e.$set(e.profileForm,"keyUsage",t)},expression:"profileForm.keyUsage"}})],1),o("b-form-group",{staticClass:"mb-0",attrs:{id:"form-ext-usage-group",label:"Certificate extended Usage","label-for":"form-ext-usage-select","label-cols-sm":"3","label-align-sm":"right","label-class":"pt-0"}},[o("multiselect",{attrs:{id:"form-ext-usage-select","close-on-select":!1,multiple:!0,"clear-on-select":!1,placeholder:"Select extended usages",options:this.$root.profileOptions.ExtendedUsages},model:{value:e.profileForm.extendedKeyUsage,callback:function(t){e.$set(e.profileForm,"extendedKeyUsage",t)},expression:"profileForm.extendedKeyUsage"}})],1)],1):e._e()],1),o("b-form-group",{staticClass:"controls"},["hide"!==e.actionName?o("b-button",{attrs:{type:"submit",variant:"primary"}},[o("i",{staticClass:"fa fa-plus-circle"}),o("span",[e._v(e._s(e.actionName)+" profile")])]):o("b-button",{attrs:{type:"reset",variant:"danger"}},[o("i",{staticClass:"fa fa-times"}),e._v("\n          Close\n        ")]),"hide"!==e.actionName?o("b-button",{attrs:{type:"reset",variant:"danger"}},[o("i",{staticClass:"fa fa-ban"}),e._v("\n          Cancel\n        ")]):e._e()],1)],1)],1)},Y=[],Z={data:function(){return{api_host:this.$root.privateAPI,profileForm:this.$root.profileForm,origName:null,actionName:null,editForm:!1,advanced:!1,title:null}},components:{Multiselect:n.a},name:"ModalProfile",methods:{showModal:function(e,t){this.editForm=Boolean(e),this.profileForm=this.$root.initProfile(e),this.profileForm.DN=this.$root.buildDn(this.profileForm.subject),"Duplicate"===t?this.editForm=!1:"Edit"===t&&(this.origName=this.profileForm.name),this.actionName=t,this.title="".concat(t," profile"),this.$refs.modalProfile.show()},onCertTypeSelect:function(e){"user"===e?(this.profileForm.extendedKeyUsage.includes("clientAuth")||this.profileForm.extendedKeyUsage.push("clientAuth"),this.profileForm.keyUsage.includes("keyEncipherment")||this.profileForm.keyUsage.push("keyEncipherment"),this.profileForm.keyUsage.includes("dataEncipherment")||this.profileForm.keyUsage.push("dataEncipherment"),this.profileForm.keyUsage.includes("nonRepudiation")||this.profileForm.keyUsage.push("nonRepudiation")):"email"===e?(this.profileForm.extendedKeyUsage.includes("emailProtection")||this.profileForm.extendedKeyUsage.push("emailProtection"),this.profileForm.keyUsage.includes("keyEncipherment")||this.profileForm.keyUsage.push("keyEncipherment"),this.profileForm.keyUsage.includes("digitalSignature")||this.profileForm.keyUsage.push("digitalSignature")):"server"===e&&(this.profileForm.extendedKeyUsage.includes("serverAuth")||this.profileForm.extendedKeyUsage.push("serverAuth"),this.profileForm.keyUsage.includes("keyEncipherment")||this.profileForm.keyUsage.push("keyEncipherment"),this.profileForm.keyUsage.includes("digitalSignature")||this.profileForm.keyUsage.push("digitalSignature"),this.profileForm.keyUsage.includes("nonRepudiation")||this.profileForm.keyUsage.push("nonRepudiation"))},onCertTypeRemove:function(e){"user"===e?(this.profileForm.extendedKeyUsage.includes("clientAuth")&&(this.profileForm.extendedKeyUsage=this.profileForm.extendedKeyUsage.filter((function(e){return"clientAuth"!==e}))),this.profileForm.keyUsage.includes("keyEncipherment")&&(this.profileForm.keyUsage=this.profileForm.keyUsage.filter((function(e){return"keyEncipherment"!==e}))),this.profileForm.keyUsage.includes("dataEncipherment")&&(this.profileForm.keyUsage=this.profileForm.keyUsage.filter((function(e){return"dataEncipherment"!==e}))),this.profileForm.keyUsage.includes("nonRepudiation")&&(this.profileForm.keyUsage=this.profileForm.keyUsage.filter((function(e){return"nonRepudiation"!==e})))):"email"===e?(this.profileForm.extendedKeyUsage.includes("emailProtection")&&(this.profileForm.extendedKeyUsage=this.profileForm.extendedKeyUsage.filter((function(e){return"emailProtection"!==e}))),this.profileForm.keyUsage.includes("keyEncipherment")&&(this.profileForm.keyUsage=this.profileForm.keyUsage.filter((function(e){return"keyEncipherment"!==e}))),this.profileForm.keyUsage.includes("digitalSignature")&&(this.profileForm.keyUsage=this.profileForm.keyUsage.filter((function(e){return"digitalSignature"!==e})))):"server"===e&&(this.profileForm.extendedKeyUsage.includes("serverAuth")&&(this.profileForm.extendedKeyUsage=this.profileForm.extendedKeyUsage.filter((function(e){return"serverAuth"!==e}))),this.profileForm.keyUsage.includes("keyEncipherment")&&(this.profileForm.keyUsage=this.profileForm.keyUsage.filter((function(e){return"keyEncipherment"!==e}))),this.profileForm.keyUsage.includes("digitalSignature")&&(this.profileForm.keyUsage=this.profileForm.keyUsage.filter((function(e){return"digitalSignature"!==e}))),this.profileForm.keyUsage.includes("nonRepudiation")&&(this.profileForm.keyUsage=this.profileForm.keyUsage.filter((function(e){return"nonRepudiation"!==e}))))},addProfile:function(e){var t=this,o="".concat(this.api_host,"/profiles");c.a.post(o,e).then((function(e){var o="success"===e.data.status?"success":"danger";t.$root.getProfiles(),t.$root.show(e.data.message,o)})).catch((function(e){console.error(e),t.$root.show(e,"danger",60)}))},updateProfile:function(e){var t=this,o="".concat(this.api_host,"/profiles/").concat(e.name);c.a.put(o,e).then((function(e){var o="success"===e.data.status?"success":"danger";t.$root.getProfiles(),t.$root.show(e.data.message,o)})).catch((function(e){console.error(e),t.$root.show(e,"danger",60)}))},onSubmit:function(e){if(e.preventDefault(),this.profileForm.DN.includes("CN="))return this.$root.show("You cannot define CN in profile subject","danger"),!1;var t=this.$root.buildSubject(this.profileForm.DN);if(!t)return this.$root.show("Invalid subject string, should be /C=XX/ST=XX/L=XX/O=XX at least"),!1;var o={name:this.profileForm.name,origName:this.origName,keyType:this.profileForm.keyType,keyLen:this.profileForm.keyLen,duration:this.profileForm.duration,digest:this.profileForm.digest,altnames:this.profileForm.altnames,domain:this.profileForm.domain,subject:t,keyUsage:this.profileForm.keyUsage,extendedKeyUsage:this.profileForm.extendedKeyUsage,certType:this.profileForm.certType};return this.editForm?this.updateProfile(o):this.addProfile(o),this.$refs.modalProfile.hide(),this.profileForm=this.$root.profileForm,this.editForm=!1,!0},onReset:function(e){return e.preventDefault(),this.$refs.modalProfile.hide(),this.profileForm=this.$root.profileForm,this.editForm=!1,!0}}},ee=Z,te=(o("42a3"),Object(b["a"])(ee,Q,Y,!1,null,null,null)),oe=te.exports,se={data:function(){return{api_host:this.$root.privateAPI,profileForm:this.$root.profileForm}},components:{modalProfile:oe},methods:{showProfileModal:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Create";this.$refs.modalProfile.showModal(e,t)},editProfile:function(e){this.showProfileModal(e,"Edit")},duplicateProfile:function(e){var t=JSON.parse(JSON.stringify(e));t.name="".concat(t.name," (duplicate)"),this.showProfileModal(t,"Duplicate")},deleteProfile:function(e){var t=this,o="".concat(this.api_host,"/profiles/").concat(e.name);c.a.delete(o).then((function(e){var o="success"===e.data.status?"success":"danger";"success"===o?t.$root.getProfiles():t.$root.show(e.data.message,o)})).catch((function(e){console.error(e),t.$root.show(e,"danger",60)}))}}},ae=se,re=(o("c78c"),Object(b["a"])(ae,G,H,!1,null,null,null)),ie=re.exports,ne=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"container"},[o("div",{staticClass:"row"},[e._m(0),o("div",{staticClass:"col-sm-2"},[o("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"button"},on:{click:function(t){return e.showAdminModal(null)}}},[o("i",{staticClass:"fa fa-plus-circle"}),e._v("\n            Add Admin\n      ")])])]),o("div",{staticClass:"row"},[o("div",{staticClass:"col-sm-12"},[o("table",{staticClass:"table table-hover"},[e._m(1),o("tbody",e._l(this.$root.admins,(function(t,s){return o("tr",{key:s},[o("td",[e._v(e._s(t.name))]),o("td",[e._v(e._s(t.DN))]),o("td",{staticClass:"text-right"},[o("i",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-times text-danger pointer",attrs:{title:"Delete admin"},on:{click:function(o){return e.deleteAdmin(t.DN)}}})])])})),0)])])]),o("modal-admin",{ref:"modalAdmin"})],1)},le=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"col-sm-10"},[o("h1",[o("i",{staticClass:"fa fa-user-shield"}),e._v(" Admins")])])},function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("thead",[o("tr",[o("th",{attrs:{scope:"col"}},[e._v("Name")]),o("th",{attrs:{scope:"col"}},[e._v("DN")]),o("th",{staticClass:"text-right",attrs:{scope:"col"}},[e._v("Actions")])])])}],ce=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("b-modal",{ref:"modalAdmin",attrs:{title:e.title,size:"lg","hide-footer":""}},[o("b-form",{staticClass:"w-100",on:{submit:e.onSubmit,reset:e.onReset}},[o("b-card",{attrs:{"bg-variant":"light"}},[o("b-form-group",{staticClass:"mb-0",attrs:{id:"form-profile-group",label:"Admin","label-for":"form-profile-input","label-cols-sm":"3","label-align-sm":"right"}},[o("b-form-text",{attrs:{id:"form-dn-input",size:"lg"}},[e._v(e._s(e.nodeAdmins.Profile)+"\n        ")])],1)],1),o("b-form-group",{staticClass:"controls"},["Show"!==e.actionName?o("b-button",{attrs:{type:"submit",variant:"primary"}},[o("i",{staticClass:"fa fa-plus-circle"}),o("span",[e._v(e._s(e.actionName)+" admin")])]):o("b-button",{attrs:{type:"reset",variant:"danger"}},[o("i",{staticClass:"fa fa-times"}),e._v("\n        Close\n      ")]),"Show"!==e.actionName?o("b-button",{attrs:{type:"reset",variant:"danger"}},[o("i",{staticClass:"fa fa-ban"}),e._v("\n        Cancel\n      ")]):e._e()],1)],1)],1)},de=[],me={data:function(){return{api_host:this.$root.privateAPI,adminForm:this.$root.adminForm,actionName:null,title:null}},components:{Multiselect:n.a},name:"ModalAdmin",methods:{showModal:function(e,t){this.editForm=Boolean(e),this.title="".concat(t," Admin"),this.actionName="Duplicate"===t?"Create":t,this.$refs.modalNode.show()},addAdmin:function(e){var t=this,o="".concat(this.api_host,"/admins");c.a.post(o,e).then((function(e){var o="success"===e.data.status?"success":"danger";"success"===o&&t.$root.getNodes(),t.$root.show(e.data.message,o)})).catch((function(e){console.error(e),t.$root.show(e,"danger",60)}))},onSubmit:function(e){e.preventDefault(),this.$refs.modalNode.hide();var t={DN:this.adminForm.DN};this.addAdmin(t),this.$refs.modalNode.hide(),this.adminForm=this.$root.adminForm},onReset:function(e){e.preventDefault(),this.$refs.modalNode.hide(),this.adminForm=this.$root.adminForm}}},ue=me,fe=(o("89a1"),Object(b["a"])(ue,ce,de,!1,null,null,null)),he=fe.exports,pe={data:function(){return{api_host:this.$root.privateAPI}},components:{modalAdmin:he},methods:{showAdminModal:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Create";this.$refs.modalAdmin.showModal(e,t)},deleteProfile:function(e){var t=this,o="".concat(this.api_host,"/admins/").concat(e.name);c.a.delete(o).then((function(e){var o="success"===e.data.status?"success":"danger";"success"===o?t.$root.getAdmins():t.$root.show(e.data.message,o)})).catch((function(e){console.error(e),t.$root.show(e,"danger",60)}))}}},ge=pe,be=(o("a15f"),Object(b["a"])(ge,ne,le,!1,null,null,null)),ve=be.exports;d["default"].use(w["a"]);var ye=new w["a"]({routes:[{path:"/",name:"Home",component:P},{path:"/nodes",name:"Nodes",component:W},{path:"/profiles",name:"Profiles",component:ie},{path:"/admins",name:"Admins",component:ve}],mode:"history"}),Fe="127.0.0.1",Ce=8e3,Ne="http://".concat(Fe,":").concat(Ce),_e="http://".concat(Fe,":").concat(Ce,"/private");d["default"].config.productionTip=!1,d["default"].use(s["a"]),d["default"].use(r.a),d["default"].component("multiselect",n.a),new d["default"]({el:"#app",router:ye,components:{App:_,VueSidebarMenu:r.a},template:"<App/>",render:function(e){return e(_)},data:function(){return{profiles:[],nodes:[],profileOptions:{CertTypes:[],Digest:[],KeyLen:[],KeyTypes:[],Usages:[],ExtendedUsages:[]},admins:[],privateAPI:_e,publicAPI:Ne,message:"",message_class:"",message_dismiss:10,showMessage:!1,profileForm:{options:{CertTypes:[],Digest:[],KeyLen:[],KeyTypes:[],Usages:[],ExtendedUsages:[]},name:"",keyType:"rsa",keyLen:"4096",digest:"sha256",duration:1,altnames:!1,domain:"yourdomain.com",subject:[],keyUsage:[],extendedKeyUsage:[],certType:[]},nodeForm:{options:[{value:null,text:"Select a profile",disabled:!0,selected:!0}],State:"Init",Serial:"",Profile:"",CN:"",DN:"",KeyLen:"",Digest:"",Duration:"",Start:"",Expire:"",KeyType:"",Sans:[]}}},methods:{forceFileDownload:function(e){var t=window.URL.createObjectURL(new Blob([e.data])),o=document.createElement("a");o.href=t,o.setAttribute("download",e.name),document.body.appendChild(o),o.click()},downloadNode:function(e,t,o){var s=this,a=btoa(e);c.a.get("".concat(Ne,"/certs/").concat(a)).then((function(e){var a="success"===e.data.status?"success":"danger";"success"===a?s.forceFileDownload({name:"".concat(o,".").concat(t,".crt"),data:e.data.certificate}):(console.error(e.data.message),s.show(e.data.message,"danger"))})).catch((function(e){console.error(e),s.show(e,"danger",60)}))},getProfiles:function(){var e=this,t="".concat(_e,"/profiles");c.a.get(t).then((function(t){var o="success"===t.data.status?"success":"danger";"success"!==o&&e.show(t.data.message,o),e.profiles=t.data.profiles})).catch((function(t){console.error(t),e.show(t,"danger",60)}))},getNodes:function(){var e=this,t="".concat(_e,"/nodes");c.a.get(t).then((function(t){var o="success"===t.data.status?"success":"danger";"success"!==o&&e.show(t.data.message,o),e.nodes=t.data.nodes})).catch((function(t){console.error(t),e.show(t,"danger",60)}))},getOptions:function(){var e=this,t="".concat(_e,"/options");c.a.get(t).then((function(t){var o="success"===t.data.status?"success":"danger";return"success"!==o?(e.show(t.data.message,o),{CertTypes:[],Digest:[],KeyLen:[],KeyTypes:[],Usages:[],ExtendedUsages:[]}):(e.profileOptions=t.data.options,t.data.options)})).catch((function(t){console.error(t),e.show(t,"danger",60)}))},initProfile:function(e){this.getOptions();var t={};return e?(t.name=e.name,t.type=e.type,t.domain=e.domain,t.keyType=e.keyType,t.keyLen=e.keyLen,t.digest=e.digest,t.duration=e.duration,t.altnames=e.altnames,t.subject=e.subject,t.keyUsage=e.keyUsage,t.extendedKeyUsage=e.extendedKeyUsage,t.certType=e.certType):t=this.profileForm,t.options=this.profileForm.options,t},initNode:function(e){var t={};return e?(t.State=e.State,t.Profile=e.Profile,t.CN=e.CN,t.DN=e.DN,t.Serial=e.Serial,t.KeyLen=e.KeyLen,t.Digest=e.Digest,t.Start=e.Start_human,t.Expire=e.Expire_human,t.Duration=e.Duration,t.KeyType=e.KeyType,t.Domain=e.Domain,t.Altnames=e.Altnames,t.Sans=e.Sans,e.options?t.options=e.options:t.options=this.nodeForm.options):t=this.nodeForm,this.profiles.forEach((function(e){var o={value:e.name,text:e.name};t.options.some((function(t){return t.value===e.name}))||t.options.push(o)})),t},getNode:function(e){var t={};return this.nodes.forEach((function(o){o.DN===e&&(t=o)})),t},getProfile:function(e){var t={};return this.profiles.forEach((function(o){o.name===e&&(t=o)})),t},profileSupport:function(e,t){var o=this.getProfile(e);return!(!o.certType.includes(t)&&!o.extendedKeyUsage.includes(t))},buildDn:function(e){var t="";return e.forEach((function(e){t+="/".concat(Object.keys(e)[0],"=").concat(Object.values(e)[0])})),t},buildSubject:function(e){if(!e.startsWith("/"))return!1;if(!e.includes("/"))return!1;var t=[],o=e.split("/");return o.forEach((function(e){var o=e.split("="),s={};s[o[0]]=o[1],t.push(s)})),t},show:function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;this.$root.message=e,this.$root.message_class=t,this.$root.message_dismiss=o,this.$root.showMessage=!0},hide:function(){this.$root.message="",this.$root.showMessage=!1}},created:function(){this.getProfiles()}})},6015:function(e,t,o){},"66e8":function(e,t,o){"use strict";var s=o("f475"),a=o.n(s);a.a},"832f":function(e,t,o){"use strict";var s=o("233d"),a=o.n(s);a.a},"89a1":function(e,t,o){"use strict";var s=o("07b2"),a=o.n(s);a.a},"8b28":function(e,t,o){"use strict";var s=o("8fe9"),a=o.n(s);a.a},"8fe9":function(e,t,o){},a15f:function(e,t,o){"use strict";var s=o("ac9a"),a=o.n(s);a.a},a9d7:function(e,t,o){},ac9a:function(e,t,o){},b0a0:function(e,t,o){"use strict";var s=o("07bb"),a=o.n(s);a.a},c78c:function(e,t,o){"use strict";var s=o("2a84"),a=o.n(s);a.a},f475:function(e,t,o){}});
//# sourceMappingURL=app.690888a2.js.map